window.RENDERER_METADATA=function(e){var a={};function t(o){if(a[o])return a[o].exports;var r=a[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=a,t.d=function(e,a,o){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var r in e)t.d(o,r,function(a){return e[a]}.bind(null,r));return o},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=1)}([function(e,a){Object.assign(a,{OK:0,ERR_NOT_OWNER:-1,ERR_NO_PATH:-2,ERR_NAME_EXISTS:-3,ERR_BUSY:-4,ERR_NOT_FOUND:-5,ERR_NOT_ENOUGH_ENERGY:-6,ERR_NOT_ENOUGH_RESOURCES:-6,ERR_INVALID_TARGET:-7,ERR_FULL:-8,ERR_NOT_IN_RANGE:-9,ERR_INVALID_ARGS:-10,ERR_TIRED:-11,ERR_NO_BODYPART:-12,ERR_NOT_ENOUGH_EXTENSIONS:-6,ERR_RCL_NOT_ENOUGH:-14,ERR_GCL_NOT_ENOUGH:-15,FIND_EXIT_TOP:1,FIND_EXIT_RIGHT:3,FIND_EXIT_BOTTOM:5,FIND_EXIT_LEFT:7,FIND_EXIT:10,FIND_CREEPS:101,FIND_MY_CREEPS:102,FIND_HOSTILE_CREEPS:103,FIND_SOURCES_ACTIVE:104,FIND_SOURCES:105,FIND_DROPPED_RESOURCES:106,FIND_STRUCTURES:107,FIND_MY_STRUCTURES:108,FIND_HOSTILE_STRUCTURES:109,FIND_FLAGS:110,FIND_CONSTRUCTION_SITES:111,FIND_MY_SPAWNS:112,FIND_HOSTILE_SPAWNS:113,FIND_MY_CONSTRUCTION_SITES:114,FIND_HOSTILE_CONSTRUCTION_SITES:115,FIND_MINERALS:116,FIND_NUKES:117,FIND_TOMBSTONES:118,FIND_POWER_CREEPS:119,FIND_MY_POWER_CREEPS:120,FIND_HOSTILE_POWER_CREEPS:121,FIND_DEPOSITS:122,FIND_RUINS:123,TOP:1,TOP_RIGHT:2,RIGHT:3,BOTTOM_RIGHT:4,BOTTOM:5,BOTTOM_LEFT:6,LEFT:7,TOP_LEFT:8,COLOR_RED:1,COLOR_PURPLE:2,COLOR_BLUE:3,COLOR_CYAN:4,COLOR_GREEN:5,COLOR_YELLOW:6,COLOR_ORANGE:7,COLOR_BROWN:8,COLOR_GREY:9,COLOR_WHITE:10,LOOK_CREEPS:"creep",LOOK_ENERGY:"energy",LOOK_RESOURCES:"resource",LOOK_SOURCES:"source",LOOK_MINERALS:"mineral",LOOK_DEPOSITS:"deposit",LOOK_STRUCTURES:"structure",LOOK_FLAGS:"flag",LOOK_CONSTRUCTION_SITES:"constructionSite",LOOK_NUKES:"nuke",LOOK_TERRAIN:"terrain",LOOK_TOMBSTONES:"tombstone",LOOK_POWER_CREEPS:"powerCreep",LOOK_RUINS:"ruin",OBSTACLE_OBJECT_TYPES:["spawn","creep","powerCreep","source","mineral","deposit","controller","constructedWall","extension","link","storage","tower","observer","powerSpawn","powerBank","lab","terminal","nuker","factory","invaderCore"],MOVE:"move",WORK:"work",CARRY:"carry",ATTACK:"attack",RANGED_ATTACK:"ranged_attack",TOUGH:"tough",HEAL:"heal",CLAIM:"claim",BODYPART_COST:{move:50,work:100,attack:80,carry:50,heal:250,ranged_attack:150,tough:10,claim:600},WORLD_WIDTH:202,WORLD_HEIGHT:202,CREEP_LIFE_TIME:1500,CREEP_CLAIM_LIFE_TIME:600,CREEP_CORPSE_RATE:.2,CREEP_PART_MAX_ENERGY:125,CARRY_CAPACITY:50,HARVEST_POWER:2,HARVEST_MINERAL_POWER:1,HARVEST_DEPOSIT_POWER:1,REPAIR_POWER:100,DISMANTLE_POWER:50,BUILD_POWER:5,ATTACK_POWER:30,UPGRADE_CONTROLLER_POWER:1,RANGED_ATTACK_POWER:10,HEAL_POWER:12,RANGED_HEAL_POWER:4,REPAIR_COST:.01,DISMANTLE_COST:.005,RAMPART_DECAY_AMOUNT:300,RAMPART_DECAY_TIME:100,RAMPART_HITS:1,RAMPART_HITS_MAX:{2:3e5,3:1e6,4:3e6,5:1e7,6:3e7,7:1e8,8:3e8},ENERGY_REGEN_TIME:300,ENERGY_DECAY:1e3,SPAWN_HITS:5e3,SPAWN_ENERGY_START:300,SPAWN_ENERGY_CAPACITY:300,CREEP_SPAWN_TIME:3,SPAWN_RENEW_RATIO:1.2,SOURCE_ENERGY_CAPACITY:3e3,SOURCE_ENERGY_NEUTRAL_CAPACITY:1500,SOURCE_ENERGY_KEEPER_CAPACITY:4e3,WALL_HITS:1,WALL_HITS_MAX:3e8,EXTENSION_HITS:1e3,EXTENSION_ENERGY_CAPACITY:{0:50,1:50,2:50,3:50,4:50,5:50,6:50,7:100,8:200},ROAD_HITS:5e3,ROAD_WEAROUT:1,ROAD_WEAROUT_POWER_CREEP:100,ROAD_DECAY_AMOUNT:100,ROAD_DECAY_TIME:1e3,LINK_HITS:1e3,LINK_HITS_MAX:1e3,LINK_CAPACITY:800,LINK_COOLDOWN:1,LINK_LOSS_RATIO:.03,STORAGE_CAPACITY:1e6,STORAGE_HITS:1e4,STRUCTURE_SPAWN:"spawn",STRUCTURE_EXTENSION:"extension",STRUCTURE_ROAD:"road",STRUCTURE_WALL:"constructedWall",STRUCTURE_RAMPART:"rampart",STRUCTURE_KEEPER_LAIR:"keeperLair",STRUCTURE_PORTAL:"portal",STRUCTURE_CONTROLLER:"controller",STRUCTURE_LINK:"link",STRUCTURE_STORAGE:"storage",STRUCTURE_TOWER:"tower",STRUCTURE_OBSERVER:"observer",STRUCTURE_POWER_BANK:"powerBank",STRUCTURE_POWER_SPAWN:"powerSpawn",STRUCTURE_EXTRACTOR:"extractor",STRUCTURE_LAB:"lab",STRUCTURE_TERMINAL:"terminal",STRUCTURE_CONTAINER:"container",STRUCTURE_NUKER:"nuker",STRUCTURE_FACTORY:"factory",STRUCTURE_INVADER_CORE:"invaderCore",CONSTRUCTION_COST:{spawn:15e3,extension:3e3,road:300,constructedWall:1,rampart:1,link:5e3,storage:3e4,tower:5e3,observer:8e3,powerSpawn:1e5,extractor:5e3,lab:5e4,terminal:1e5,container:5e3,nuker:1e5,factory:1e5},CONSTRUCTION_COST_ROAD_SWAMP_RATIO:5,CONSTRUCTION_COST_ROAD_WALL_RATIO:150,CONTROLLER_LEVELS:{1:200,2:45e3,3:135e3,4:405e3,5:1215e3,6:3645e3,7:10935e3},CONTROLLER_STRUCTURES:{spawn:{0:0,1:1,2:1,3:1,4:1,5:1,6:1,7:2,8:3},extension:{0:0,1:0,2:5,3:10,4:20,5:30,6:40,7:50,8:60},link:{1:0,2:0,3:0,4:0,5:2,6:3,7:4,8:6},road:{0:2500,1:2500,2:2500,3:2500,4:2500,5:2500,6:2500,7:2500,8:2500},constructedWall:{1:0,2:2500,3:2500,4:2500,5:2500,6:2500,7:2500,8:2500},rampart:{1:0,2:2500,3:2500,4:2500,5:2500,6:2500,7:2500,8:2500},storage:{1:0,2:0,3:0,4:1,5:1,6:1,7:1,8:1},tower:{1:0,2:0,3:1,4:1,5:2,6:2,7:3,8:6},observer:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1},powerSpawn:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1},extractor:{1:0,2:0,3:0,4:0,5:0,6:1,7:1,8:1},terminal:{1:0,2:0,3:0,4:0,5:0,6:1,7:1,8:1},lab:{1:0,2:0,3:0,4:0,5:0,6:3,7:6,8:10},container:{0:5,1:5,2:5,3:5,4:5,5:5,6:5,7:5,8:5},nuker:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1},factory:{1:0,2:0,3:0,4:0,5:0,6:0,7:1,8:1}},CONTROLLER_DOWNGRADE:{1:2e4,2:1e4,3:2e4,4:4e4,5:8e4,6:12e4,7:15e4,8:2e5},CONTROLLER_DOWNGRADE_RESTORE:100,CONTROLLER_DOWNGRADE_SAFEMODE_THRESHOLD:5e3,CONTROLLER_CLAIM_DOWNGRADE:300,CONTROLLER_RESERVE:1,CONTROLLER_RESERVE_MAX:5e3,CONTROLLER_MAX_UPGRADE_PER_TICK:15,CONTROLLER_ATTACK_BLOCKED_UPGRADE:1e3,CONTROLLER_NUKE_BLOCKED_UPGRADE:200,SAFE_MODE_DURATION:2e4,SAFE_MODE_COOLDOWN:5e4,SAFE_MODE_COST:1e3,TOWER_HITS:3e3,TOWER_CAPACITY:1e3,TOWER_ENERGY_COST:10,TOWER_POWER_ATTACK:600,TOWER_POWER_HEAL:400,TOWER_POWER_REPAIR:800,TOWER_OPTIMAL_RANGE:5,TOWER_FALLOFF_RANGE:20,TOWER_FALLOFF:.75,OBSERVER_HITS:500,OBSERVER_RANGE:10,POWER_BANK_HITS:2e6,POWER_BANK_CAPACITY_MAX:5e3,POWER_BANK_CAPACITY_MIN:500,POWER_BANK_CAPACITY_CRIT:.3,POWER_BANK_DECAY:5e3,POWER_BANK_HIT_BACK:.5,POWER_SPAWN_HITS:5e3,POWER_SPAWN_ENERGY_CAPACITY:5e3,POWER_SPAWN_POWER_CAPACITY:100,POWER_SPAWN_ENERGY_RATIO:50,EXTRACTOR_HITS:500,EXTRACTOR_COOLDOWN:5,LAB_HITS:500,LAB_MINERAL_CAPACITY:3e3,LAB_ENERGY_CAPACITY:2e3,LAB_BOOST_ENERGY:20,LAB_BOOST_MINERAL:30,LAB_COOLDOWN:10,LAB_REACTION_AMOUNT:5,LAB_UNBOOST_ENERGY:0,LAB_UNBOOST_MINERAL:15,GCL_POW:2.4,GCL_MULTIPLY:1e6,GCL_NOVICE:3,MODE_SIMULATION:null,MODE_WORLD:null,TERRAIN_MASK_WALL:1,TERRAIN_MASK_SWAMP:2,TERRAIN_MASK_LAVA:4,MAX_CONSTRUCTION_SITES:100,MAX_CREEP_SIZE:50,MINERAL_REGEN_TIME:5e4,MINERAL_MIN_AMOUNT:{H:35e3,O:35e3,L:35e3,K:35e3,Z:35e3,U:35e3,X:35e3},MINERAL_RANDOM_FACTOR:2,MINERAL_DENSITY:{1:15e3,2:35e3,3:7e4,4:1e5},MINERAL_DENSITY_PROBABILITY:{1:.1,2:.5,3:.9,4:1},MINERAL_DENSITY_CHANGE:.05,DENSITY_LOW:1,DENSITY_MODERATE:2,DENSITY_HIGH:3,DENSITY_ULTRA:4,DEPOSIT_EXHAUST_MULTIPLY:.001,DEPOSIT_EXHAUST_POW:1.2,DEPOSIT_DECAY_TIME:5e4,TERMINAL_CAPACITY:3e5,TERMINAL_HITS:3e3,TERMINAL_SEND_COST:.1,TERMINAL_MIN_SEND:100,TERMINAL_COOLDOWN:10,CONTAINER_HITS:25e4,CONTAINER_CAPACITY:2e3,CONTAINER_DECAY:5e3,CONTAINER_DECAY_TIME:100,CONTAINER_DECAY_TIME_OWNED:500,NUKER_HITS:1e3,NUKER_COOLDOWN:1e5,NUKER_ENERGY_CAPACITY:3e5,NUKER_GHODIUM_CAPACITY:5e3,NUKE_LAND_TIME:5e4,NUKE_RANGE:10,NUKE_DAMAGE:{0:1e7,2:5e6},FACTORY_HITS:1e3,FACTORY_CAPACITY:5e4,TOMBSTONE_DECAY_PER_PART:5,TOMBSTONE_DECAY_POWER_CREEP:500,RUIN_DECAY:500,RUIN_DECAY_STRUCTURES:{powerBank:10},PORTAL_DECAY:3e4,ORDER_SELL:"sell",ORDER_BUY:"buy",MARKET_FEE:.05,MARKET_MAX_ORDERS:300,MARKET_ORDER_LIFE_TIME:2592e6,FLAGS_LIMIT:1e4,SUBSCRIPTION_TOKEN:"token",RESOURCE_ENERGY:"energy",RESOURCE_POWER:"power",RESOURCE_HYDROGEN:"H",RESOURCE_OXYGEN:"O",RESOURCE_UTRIUM:"U",RESOURCE_LEMERGIUM:"L",RESOURCE_KEANIUM:"K",RESOURCE_ZYNTHIUM:"Z",RESOURCE_CATALYST:"X",RESOURCE_GHODIUM:"G",RESOURCE_SILICON:"silicon",RESOURCE_METAL:"metal",RESOURCE_BIOMASS:"biomass",RESOURCE_MIST:"mist",RESOURCE_HYDROXIDE:"OH",RESOURCE_ZYNTHIUM_KEANITE:"ZK",RESOURCE_UTRIUM_LEMERGITE:"UL",RESOURCE_UTRIUM_HYDRIDE:"UH",RESOURCE_UTRIUM_OXIDE:"UO",RESOURCE_KEANIUM_HYDRIDE:"KH",RESOURCE_KEANIUM_OXIDE:"KO",RESOURCE_LEMERGIUM_HYDRIDE:"LH",RESOURCE_LEMERGIUM_OXIDE:"LO",RESOURCE_ZYNTHIUM_HYDRIDE:"ZH",RESOURCE_ZYNTHIUM_OXIDE:"ZO",RESOURCE_GHODIUM_HYDRIDE:"GH",RESOURCE_GHODIUM_OXIDE:"GO",RESOURCE_UTRIUM_ACID:"UH2O",RESOURCE_UTRIUM_ALKALIDE:"UHO2",RESOURCE_KEANIUM_ACID:"KH2O",RESOURCE_KEANIUM_ALKALIDE:"KHO2",RESOURCE_LEMERGIUM_ACID:"LH2O",RESOURCE_LEMERGIUM_ALKALIDE:"LHO2",RESOURCE_ZYNTHIUM_ACID:"ZH2O",RESOURCE_ZYNTHIUM_ALKALIDE:"ZHO2",RESOURCE_GHODIUM_ACID:"GH2O",RESOURCE_GHODIUM_ALKALIDE:"GHO2",RESOURCE_CATALYZED_UTRIUM_ACID:"XUH2O",RESOURCE_CATALYZED_UTRIUM_ALKALIDE:"XUHO2",RESOURCE_CATALYZED_KEANIUM_ACID:"XKH2O",RESOURCE_CATALYZED_KEANIUM_ALKALIDE:"XKHO2",RESOURCE_CATALYZED_LEMERGIUM_ACID:"XLH2O",RESOURCE_CATALYZED_LEMERGIUM_ALKALIDE:"XLHO2",RESOURCE_CATALYZED_ZYNTHIUM_ACID:"XZH2O",RESOURCE_CATALYZED_ZYNTHIUM_ALKALIDE:"XZHO2",RESOURCE_CATALYZED_GHODIUM_ACID:"XGH2O",RESOURCE_CATALYZED_GHODIUM_ALKALIDE:"XGHO2",RESOURCE_OPS:"ops",RESOURCE_UTRIUM_BAR:"utrium_bar",RESOURCE_LEMERGIUM_BAR:"lemergium_bar",RESOURCE_ZYNTHIUM_BAR:"zynthium_bar",RESOURCE_KEANIUM_BAR:"keanium_bar",RESOURCE_GHODIUM_MELT:"ghodium_melt",RESOURCE_OXIDANT:"oxidant",RESOURCE_REDUCTANT:"reductant",RESOURCE_PURIFIER:"purifier",RESOURCE_BATTERY:"battery",RESOURCE_COMPOSITE:"composite",RESOURCE_CRYSTAL:"crystal",RESOURCE_LIQUID:"liquid",RESOURCE_WIRE:"wire",RESOURCE_SWITCH:"switch",RESOURCE_TRANSISTOR:"transistor",RESOURCE_MICROCHIP:"microchip",RESOURCE_CIRCUIT:"circuit",RESOURCE_DEVICE:"device",RESOURCE_CELL:"cell",RESOURCE_PHLEGM:"phlegm",RESOURCE_TISSUE:"tissue",RESOURCE_MUSCLE:"muscle",RESOURCE_ORGANOID:"organoid",RESOURCE_ORGANISM:"organism",RESOURCE_ALLOY:"alloy",RESOURCE_TUBE:"tube",RESOURCE_FIXTURES:"fixtures",RESOURCE_FRAME:"frame",RESOURCE_HYDRAULICS:"hydraulics",RESOURCE_MACHINE:"machine",RESOURCE_CONDENSATE:"condensate",RESOURCE_CONCENTRATE:"concentrate",RESOURCE_EXTRACT:"extract",RESOURCE_SPIRIT:"spirit",RESOURCE_EMANATION:"emanation",RESOURCE_ESSENCE:"essence",REACTIONS:{H:{O:"OH",L:"LH",K:"KH",U:"UH",Z:"ZH",G:"GH"},O:{H:"OH",L:"LO",K:"KO",U:"UO",Z:"ZO",G:"GO"},Z:{K:"ZK",H:"ZH",O:"ZO"},L:{U:"UL",H:"LH",O:"LO"},K:{Z:"ZK",H:"KH",O:"KO"},G:{H:"GH",O:"GO"},U:{L:"UL",H:"UH",O:"UO"},OH:{UH:"UH2O",UO:"UHO2",ZH:"ZH2O",ZO:"ZHO2",KH:"KH2O",KO:"KHO2",LH:"LH2O",LO:"LHO2",GH:"GH2O",GO:"GHO2"},X:{UH2O:"XUH2O",UHO2:"XUHO2",LH2O:"XLH2O",LHO2:"XLHO2",KH2O:"XKH2O",KHO2:"XKHO2",ZH2O:"XZH2O",ZHO2:"XZHO2",GH2O:"XGH2O",GHO2:"XGHO2"},ZK:{UL:"G"},UL:{ZK:"G"},LH:{OH:"LH2O"},ZH:{OH:"ZH2O"},GH:{OH:"GH2O"},KH:{OH:"KH2O"},UH:{OH:"UH2O"},LO:{OH:"LHO2"},ZO:{OH:"ZHO2"},KO:{OH:"KHO2"},UO:{OH:"UHO2"},GO:{OH:"GHO2"},LH2O:{X:"XLH2O"},KH2O:{X:"XKH2O"},ZH2O:{X:"XZH2O"},UH2O:{X:"XUH2O"},GH2O:{X:"XGH2O"},LHO2:{X:"XLHO2"},UHO2:{X:"XUHO2"},KHO2:{X:"XKHO2"},ZHO2:{X:"XZHO2"},GHO2:{X:"XGHO2"}},BOOSTS:{work:{UO:{harvest:3},UHO2:{harvest:5},XUHO2:{harvest:7},LH:{build:1.5,repair:1.5},LH2O:{build:1.8,repair:1.8},XLH2O:{build:2,repair:2},ZH:{dismantle:2},ZH2O:{dismantle:3},XZH2O:{dismantle:4},GH:{upgradeController:1.5},GH2O:{upgradeController:1.8},XGH2O:{upgradeController:2}},attack:{UH:{attack:2},UH2O:{attack:3},XUH2O:{attack:4}},ranged_attack:{KO:{rangedAttack:2,rangedMassAttack:2},KHO2:{rangedAttack:3,rangedMassAttack:3},XKHO2:{rangedAttack:4,rangedMassAttack:4}},heal:{LO:{heal:2,rangedHeal:2},LHO2:{heal:3,rangedHeal:3},XLHO2:{heal:4,rangedHeal:4}},carry:{KH:{capacity:2},KH2O:{capacity:3},XKH2O:{capacity:4}},move:{ZO:{fatigue:2},ZHO2:{fatigue:3},XZHO2:{fatigue:4}},tough:{GO:{damage:.7},GHO2:{damage:.5},XGHO2:{damage:.3}}},REACTION_TIME:{OH:20,ZK:5,UL:5,G:5,UH:10,UH2O:5,XUH2O:60,UO:10,UHO2:5,XUHO2:60,KH:10,KH2O:5,XKH2O:60,KO:10,KHO2:5,XKHO2:60,LH:15,LH2O:10,XLH2O:65,LO:10,LHO2:5,XLHO2:60,ZH:20,ZH2O:40,XZH2O:160,ZO:10,ZHO2:5,XZHO2:60,GH:10,GH2O:15,XGH2O:80,GO:10,GHO2:30,XGHO2:150},PORTAL_UNSTABLE:864e6,PORTAL_MIN_TIMEOUT:10368e5,PORTAL_MAX_TIMEOUT:19008e5,POWER_BANK_RESPAWN_TIME:5e4,INVADERS_ENERGY_GOAL:1e5,SYSTEM_USERNAME:"Screeps",SIGN_NOVICE_AREA:"A new Novice or Respawn Area is being planned somewhere in this sector. Please make sure all important rooms are reserved.",SIGN_RESPAWN_AREA:"A new Novice or Respawn Area is being planned somewhere in this sector. Please make sure all important rooms are reserved.",SIGN_PLANNED_AREA:"A new Novice or Respawn Area is being planned somewhere in this sector. Please make sure all important rooms are reserved.",EVENT_ATTACK:1,EVENT_OBJECT_DESTROYED:2,EVENT_ATTACK_CONTROLLER:3,EVENT_BUILD:4,EVENT_HARVEST:5,EVENT_HEAL:6,EVENT_REPAIR:7,EVENT_RESERVE_CONTROLLER:8,EVENT_UPGRADE_CONTROLLER:9,EVENT_EXIT:10,EVENT_POWER:11,EVENT_TRANSFER:12,EVENT_ATTACK_TYPE_MELEE:1,EVENT_ATTACK_TYPE_RANGED:2,EVENT_ATTACK_TYPE_RANGED_MASS:3,EVENT_ATTACK_TYPE_DISMANTLE:4,EVENT_ATTACK_TYPE_HIT_BACK:5,EVENT_ATTACK_TYPE_NUKE:6,EVENT_HEAL_TYPE_MELEE:1,EVENT_HEAL_TYPE_RANGED:2,POWER_LEVEL_MULTIPLY:1e3,POWER_LEVEL_POW:2,POWER_CREEP_SPAWN_COOLDOWN:288e5,POWER_CREEP_DELETE_COOLDOWN:864e5,POWER_CREEP_MAX_LEVEL:25,POWER_CREEP_LIFE_TIME:5e3,POWER_CLASS:{OPERATOR:"operator"},PWR_GENERATE_OPS:1,PWR_OPERATE_SPAWN:2,PWR_OPERATE_TOWER:3,PWR_OPERATE_STORAGE:4,PWR_OPERATE_LAB:5,PWR_OPERATE_EXTENSION:6,PWR_OPERATE_OBSERVER:7,PWR_OPERATE_TERMINAL:8,PWR_DISRUPT_SPAWN:9,PWR_DISRUPT_TOWER:10,PWR_DISRUPT_SOURCE:11,PWR_SHIELD:12,PWR_REGEN_SOURCE:13,PWR_REGEN_MINERAL:14,PWR_DISRUPT_TERMINAL:15,PWR_OPERATE_POWER:16,PWR_FORTIFY:17,PWR_OPERATE_CONTROLLER:18,PWR_OPERATE_FACTORY:19,EFFECT_INVULNERABILITY:1001,EFFECT_COLLAPSE_TIMER:1002,INVADER_CORE_HITS:1e5,INVADER_CORE_CREEP_SPAWN_TIME:{0:0,1:0,2:6,3:3,4:2,5:1},INVADER_CORE_EXPAND_TIME:{1:4e3,2:3500,3:3e3,4:2500,5:2e3},INVADER_CORE_CONTROLLER_POWER:2,INVADER_CORE_CONTROLLER_DOWNGRADE:5e3,STRONGHOLD_RAMPART_HITS:{0:0,1:1e5,2:2e5,3:5e5,4:1e6,5:2e6},STRONGHOLD_DECAY_TICKS:75e3}),Object.assign(a,{POWER_INFO:{[a.PWR_GENERATE_OPS]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:50,effect:[1,2,4,6,8]},[a.PWR_OPERATE_SPAWN]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:300,duration:1e3,range:3,ops:100,effect:[.9,.7,.5,.35,.2]},[a.PWR_OPERATE_TOWER]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:10,duration:100,range:3,ops:10,effect:[1.1,1.2,1.3,1.4,1.5]},[a.PWR_OPERATE_STORAGE]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:800,duration:1e3,range:3,ops:100,effect:[5e5,1e6,2e6,4e6,7e6]},[a.PWR_OPERATE_LAB]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:50,duration:1e3,range:3,ops:10,effect:[2,4,6,8,10]},[a.PWR_OPERATE_EXTENSION]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:50,range:3,ops:2,effect:[.2,.4,.6,.8,1]},[a.PWR_OPERATE_OBSERVER]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:400,duration:[200,400,600,800,1e3],range:3,ops:10},[a.PWR_OPERATE_TERMINAL]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:500,duration:1e3,range:3,ops:100,effect:[.9,.8,.7,.6,.5]},[a.PWR_DISRUPT_SPAWN]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:5,range:20,ops:10,duration:[1,2,3,4,5]},[a.PWR_DISRUPT_TOWER]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:0,duration:5,range:50,ops:10,effect:[.9,.8,.7,.6,.5]},[a.PWR_DISRUPT_SOURCE]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:100,range:3,ops:100,duration:[100,200,300,400,500]},[a.PWR_SHIELD]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],effect:[5e3,1e4,15e3,2e4,25e3],duration:50,cooldown:20,energy:100},[a.PWR_REGEN_SOURCE]:{className:a.POWER_CLASS.OPERATOR,level:[10,11,12,14,22],cooldown:100,duration:300,range:3,effect:[50,100,150,200,250],period:15},[a.PWR_REGEN_MINERAL]:{className:a.POWER_CLASS.OPERATOR,level:[10,11,12,14,22],cooldown:100,duration:100,range:3,effect:[2,4,6,8,10],period:10},[a.PWR_DISRUPT_TERMINAL]:{className:a.POWER_CLASS.OPERATOR,level:[20,21,22,23,24],cooldown:8,duration:10,range:50,ops:[50,40,30,20,10]},[a.PWR_FORTIFY]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:5,range:3,ops:5,duration:[1,2,3,4,5]},[a.PWR_OPERATE_POWER]:{className:a.POWER_CLASS.OPERATOR,level:[10,11,12,14,22],cooldown:800,range:3,duration:1e3,ops:200,effect:[1,2,3,4,5]},[a.PWR_OPERATE_CONTROLLER]:{className:a.POWER_CLASS.OPERATOR,level:[20,21,22,23,24],cooldown:800,range:3,duration:1e3,ops:200,effect:[10,20,30,40,50]},[a.PWR_OPERATE_FACTORY]:{className:a.POWER_CLASS.OPERATOR,level:[0,2,7,14,22],cooldown:800,range:3,duration:1e3,ops:100}},BODYPARTS_ALL:[a.MOVE,a.WORK,a.CARRY,a.ATTACK,a.RANGED_ATTACK,a.TOUGH,a.HEAL,a.CLAIM],RESOURCES_ALL:[a.RESOURCE_ENERGY,a.RESOURCE_POWER,a.RESOURCE_HYDROGEN,a.RESOURCE_OXYGEN,a.RESOURCE_UTRIUM,a.RESOURCE_KEANIUM,a.RESOURCE_LEMERGIUM,a.RESOURCE_ZYNTHIUM,a.RESOURCE_CATALYST,a.RESOURCE_GHODIUM,a.RESOURCE_HYDROXIDE,a.RESOURCE_ZYNTHIUM_KEANITE,a.RESOURCE_UTRIUM_LEMERGITE,a.RESOURCE_UTRIUM_HYDRIDE,a.RESOURCE_UTRIUM_OXIDE,a.RESOURCE_KEANIUM_HYDRIDE,a.RESOURCE_KEANIUM_OXIDE,a.RESOURCE_LEMERGIUM_HYDRIDE,a.RESOURCE_LEMERGIUM_OXIDE,a.RESOURCE_ZYNTHIUM_HYDRIDE,a.RESOURCE_ZYNTHIUM_OXIDE,a.RESOURCE_GHODIUM_HYDRIDE,a.RESOURCE_GHODIUM_OXIDE,a.RESOURCE_UTRIUM_ACID,a.RESOURCE_UTRIUM_ALKALIDE,a.RESOURCE_KEANIUM_ACID,a.RESOURCE_KEANIUM_ALKALIDE,a.RESOURCE_LEMERGIUM_ACID,a.RESOURCE_LEMERGIUM_ALKALIDE,a.RESOURCE_ZYNTHIUM_ACID,a.RESOURCE_ZYNTHIUM_ALKALIDE,a.RESOURCE_GHODIUM_ACID,a.RESOURCE_GHODIUM_ALKALIDE,a.RESOURCE_CATALYZED_UTRIUM_ACID,a.RESOURCE_CATALYZED_UTRIUM_ALKALIDE,a.RESOURCE_CATALYZED_KEANIUM_ACID,a.RESOURCE_CATALYZED_KEANIUM_ALKALIDE,a.RESOURCE_CATALYZED_LEMERGIUM_ACID,a.RESOURCE_CATALYZED_LEMERGIUM_ALKALIDE,a.RESOURCE_CATALYZED_ZYNTHIUM_ACID,a.RESOURCE_CATALYZED_ZYNTHIUM_ALKALIDE,a.RESOURCE_CATALYZED_GHODIUM_ACID,a.RESOURCE_CATALYZED_GHODIUM_ALKALIDE,a.RESOURCE_OPS,a.RESOURCE_SILICON,a.RESOURCE_METAL,a.RESOURCE_BIOMASS,a.RESOURCE_MIST,a.RESOURCE_UTRIUM_BAR,a.RESOURCE_LEMERGIUM_BAR,a.RESOURCE_ZYNTHIUM_BAR,a.RESOURCE_KEANIUM_BAR,a.RESOURCE_GHODIUM_MELT,a.RESOURCE_OXIDANT,a.RESOURCE_REDUCTANT,a.RESOURCE_PURIFIER,a.RESOURCE_BATTERY,a.RESOURCE_COMPOSITE,a.RESOURCE_CRYSTAL,a.RESOURCE_LIQUID,a.RESOURCE_WIRE,a.RESOURCE_SWITCH,a.RESOURCE_TRANSISTOR,a.RESOURCE_MICROCHIP,a.RESOURCE_CIRCUIT,a.RESOURCE_DEVICE,a.RESOURCE_CELL,a.RESOURCE_PHLEGM,a.RESOURCE_TISSUE,a.RESOURCE_MUSCLE,a.RESOURCE_ORGANOID,a.RESOURCE_ORGANISM,a.RESOURCE_ALLOY,a.RESOURCE_TUBE,a.RESOURCE_FIXTURES,a.RESOURCE_FRAME,a.RESOURCE_HYDRAULICS,a.RESOURCE_MACHINE,a.RESOURCE_CONDENSATE,a.RESOURCE_CONCENTRATE,a.RESOURCE_EXTRACT,a.RESOURCE_SPIRIT,a.RESOURCE_EMANATION,a.RESOURCE_ESSENCE],COLORS_ALL:[a.COLOR_RED,a.COLOR_PURPLE,a.COLOR_BLUE,a.COLOR_CYAN,a.COLOR_GREEN,a.COLOR_YELLOW,a.COLOR_ORANGE,a.COLOR_BROWN,a.COLOR_GREY,a.COLOR_WHITE],INTERSHARD_RESOURCES:[a.SUBSCRIPTION_TOKEN],COMMODITIES:{[a.RESOURCE_UTRIUM_BAR]:{amount:100,cooldown:20,components:{[a.RESOURCE_UTRIUM]:500,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_UTRIUM]:{amount:500,cooldown:20,components:{[a.RESOURCE_UTRIUM_BAR]:100,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_LEMERGIUM_BAR]:{amount:100,cooldown:20,components:{[a.RESOURCE_LEMERGIUM]:500,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_LEMERGIUM]:{amount:500,cooldown:20,components:{[a.RESOURCE_LEMERGIUM_BAR]:100,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_ZYNTHIUM_BAR]:{amount:100,cooldown:20,components:{[a.RESOURCE_ZYNTHIUM]:500,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_ZYNTHIUM]:{amount:500,cooldown:20,components:{[a.RESOURCE_ZYNTHIUM_BAR]:100,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_KEANIUM_BAR]:{amount:100,cooldown:20,components:{[a.RESOURCE_KEANIUM]:500,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_KEANIUM]:{amount:500,cooldown:20,components:{[a.RESOURCE_KEANIUM_BAR]:100,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_GHODIUM_MELT]:{amount:100,cooldown:20,components:{[a.RESOURCE_GHODIUM]:500,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_GHODIUM]:{amount:500,cooldown:20,components:{[a.RESOURCE_GHODIUM_MELT]:100,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_OXIDANT]:{amount:100,cooldown:20,components:{[a.RESOURCE_OXYGEN]:500,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_OXYGEN]:{amount:500,cooldown:20,components:{[a.RESOURCE_OXIDANT]:100,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_REDUCTANT]:{amount:100,cooldown:20,components:{[a.RESOURCE_HYDROGEN]:500,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_HYDROGEN]:{amount:500,cooldown:20,components:{[a.RESOURCE_REDUCTANT]:100,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_PURIFIER]:{amount:100,cooldown:20,components:{[a.RESOURCE_CATALYST]:500,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_CATALYST]:{amount:500,cooldown:20,components:{[a.RESOURCE_PURIFIER]:100,[a.RESOURCE_ENERGY]:200}},[a.RESOURCE_BATTERY]:{amount:50,cooldown:10,components:{[a.RESOURCE_ENERGY]:600}},[a.RESOURCE_ENERGY]:{amount:500,cooldown:10,components:{[a.RESOURCE_BATTERY]:50}},[a.RESOURCE_COMPOSITE]:{level:1,amount:20,cooldown:50,components:{[a.RESOURCE_UTRIUM_BAR]:20,[a.RESOURCE_ZYNTHIUM_BAR]:20,[a.RESOURCE_ENERGY]:20}},[a.RESOURCE_CRYSTAL]:{level:2,amount:6,cooldown:21,components:{[a.RESOURCE_LEMERGIUM_BAR]:6,[a.RESOURCE_KEANIUM_BAR]:6,[a.RESOURCE_PURIFIER]:6,[a.RESOURCE_ENERGY]:45}},[a.RESOURCE_LIQUID]:{level:3,amount:12,cooldown:60,components:{[a.RESOURCE_OXIDANT]:12,[a.RESOURCE_REDUCTANT]:12,[a.RESOURCE_GHODIUM_MELT]:12,[a.RESOURCE_ENERGY]:90}},[a.RESOURCE_WIRE]:{amount:20,cooldown:8,components:{[a.RESOURCE_UTRIUM_BAR]:20,[a.RESOURCE_SILICON]:100,[a.RESOURCE_ENERGY]:40}},[a.RESOURCE_SWITCH]:{level:1,amount:5,cooldown:70,components:{[a.RESOURCE_WIRE]:40,[a.RESOURCE_OXIDANT]:95,[a.RESOURCE_UTRIUM_BAR]:35,[a.RESOURCE_ENERGY]:20}},[a.RESOURCE_TRANSISTOR]:{level:2,amount:1,cooldown:59,components:{[a.RESOURCE_SWITCH]:4,[a.RESOURCE_WIRE]:15,[a.RESOURCE_REDUCTANT]:85,[a.RESOURCE_ENERGY]:8}},[a.RESOURCE_MICROCHIP]:{level:3,amount:1,cooldown:250,components:{[a.RESOURCE_TRANSISTOR]:2,[a.RESOURCE_COMPOSITE]:50,[a.RESOURCE_WIRE]:117,[a.RESOURCE_PURIFIER]:25,[a.RESOURCE_ENERGY]:16}},[a.RESOURCE_CIRCUIT]:{level:4,amount:1,cooldown:800,components:{[a.RESOURCE_MICROCHIP]:1,[a.RESOURCE_TRANSISTOR]:5,[a.RESOURCE_SWITCH]:4,[a.RESOURCE_OXIDANT]:115,[a.RESOURCE_ENERGY]:32}},[a.RESOURCE_DEVICE]:{level:5,amount:1,cooldown:600,components:{[a.RESOURCE_CIRCUIT]:1,[a.RESOURCE_MICROCHIP]:3,[a.RESOURCE_CRYSTAL]:110,[a.RESOURCE_GHODIUM_MELT]:150,[a.RESOURCE_ENERGY]:64}},[a.RESOURCE_CELL]:{amount:20,cooldown:8,components:{[a.RESOURCE_LEMERGIUM_BAR]:20,[a.RESOURCE_BIOMASS]:100,[a.RESOURCE_ENERGY]:40}},[a.RESOURCE_PHLEGM]:{level:1,amount:2,cooldown:35,components:{[a.RESOURCE_CELL]:20,[a.RESOURCE_OXIDANT]:36,[a.RESOURCE_LEMERGIUM_BAR]:16,[a.RESOURCE_ENERGY]:8}},[a.RESOURCE_TISSUE]:{level:2,amount:2,cooldown:164,components:{[a.RESOURCE_PHLEGM]:10,[a.RESOURCE_CELL]:10,[a.RESOURCE_REDUCTANT]:110,[a.RESOURCE_ENERGY]:16}},[a.RESOURCE_MUSCLE]:{level:3,amount:1,cooldown:250,components:{[a.RESOURCE_TISSUE]:3,[a.RESOURCE_PHLEGM]:3,[a.RESOURCE_ZYNTHIUM_BAR]:50,[a.RESOURCE_REDUCTANT]:50,[a.RESOURCE_ENERGY]:16}},[a.RESOURCE_ORGANOID]:{level:4,amount:1,cooldown:800,components:{[a.RESOURCE_MUSCLE]:1,[a.RESOURCE_TISSUE]:5,[a.RESOURCE_PURIFIER]:208,[a.RESOURCE_OXIDANT]:256,[a.RESOURCE_ENERGY]:32}},[a.RESOURCE_ORGANISM]:{level:5,amount:1,cooldown:600,components:{[a.RESOURCE_ORGANOID]:1,[a.RESOURCE_LIQUID]:150,[a.RESOURCE_TISSUE]:6,[a.RESOURCE_CELL]:310,[a.RESOURCE_ENERGY]:64}},[a.RESOURCE_ALLOY]:{amount:20,cooldown:8,components:{[a.RESOURCE_ZYNTHIUM_BAR]:20,[a.RESOURCE_METAL]:100,[a.RESOURCE_ENERGY]:40}},[a.RESOURCE_TUBE]:{level:1,amount:2,cooldown:45,components:{[a.RESOURCE_ALLOY]:40,[a.RESOURCE_ZYNTHIUM_BAR]:16,[a.RESOURCE_ENERGY]:8}},[a.RESOURCE_FIXTURES]:{level:2,amount:1,cooldown:115,components:{[a.RESOURCE_COMPOSITE]:20,[a.RESOURCE_ALLOY]:41,[a.RESOURCE_OXIDANT]:161,[a.RESOURCE_ENERGY]:8}},[a.RESOURCE_FRAME]:{level:3,amount:1,cooldown:125,components:{[a.RESOURCE_FIXTURES]:2,[a.RESOURCE_TUBE]:4,[a.RESOURCE_REDUCTANT]:330,[a.RESOURCE_ZYNTHIUM_BAR]:31,[a.RESOURCE_ENERGY]:16}},[a.RESOURCE_HYDRAULICS]:{level:4,amount:1,cooldown:800,components:{[a.RESOURCE_LIQUID]:150,[a.RESOURCE_FIXTURES]:3,[a.RESOURCE_TUBE]:15,[a.RESOURCE_PURIFIER]:208,[a.RESOURCE_ENERGY]:32}},[a.RESOURCE_MACHINE]:{level:5,amount:1,cooldown:600,components:{[a.RESOURCE_HYDRAULICS]:1,[a.RESOURCE_FRAME]:2,[a.RESOURCE_FIXTURES]:3,[a.RESOURCE_TUBE]:12,[a.RESOURCE_ENERGY]:64}},[a.RESOURCE_CONDENSATE]:{amount:20,cooldown:8,components:{[a.RESOURCE_KEANIUM_BAR]:20,[a.RESOURCE_MIST]:100,[a.RESOURCE_ENERGY]:40}},[a.RESOURCE_CONCENTRATE]:{level:1,amount:3,cooldown:41,components:{[a.RESOURCE_CONDENSATE]:30,[a.RESOURCE_KEANIUM_BAR]:15,[a.RESOURCE_REDUCTANT]:54,[a.RESOURCE_ENERGY]:12}},[a.RESOURCE_EXTRACT]:{level:2,amount:2,cooldown:128,components:{[a.RESOURCE_CONCENTRATE]:10,[a.RESOURCE_CONDENSATE]:30,[a.RESOURCE_OXIDANT]:60,[a.RESOURCE_ENERGY]:16}},[a.RESOURCE_SPIRIT]:{level:3,amount:1,cooldown:200,components:{[a.RESOURCE_EXTRACT]:2,[a.RESOURCE_CONCENTRATE]:6,[a.RESOURCE_REDUCTANT]:90,[a.RESOURCE_PURIFIER]:20,[a.RESOURCE_ENERGY]:16}},[a.RESOURCE_EMANATION]:{level:4,amount:1,cooldown:800,components:{[a.RESOURCE_SPIRIT]:2,[a.RESOURCE_EXTRACT]:2,[a.RESOURCE_CONCENTRATE]:3,[a.RESOURCE_KEANIUM_BAR]:112,[a.RESOURCE_ENERGY]:32}},[a.RESOURCE_ESSENCE]:{level:5,amount:1,cooldown:600,components:{[a.RESOURCE_EMANATION]:1,[a.RESOURCE_SPIRIT]:3,[a.RESOURCE_CRYSTAL]:110,[a.RESOURCE_GHODIUM_MELT]:150,[a.RESOURCE_ENERGY]:64}}}})},function(e,a,t){"use strict";t.r(a);var o=(e,a,t,o)=>({action:"Sequence",params:[[{action:"AlphaTo",params:[e,0]},{action:"Repeat",params:[{action:"Sequence",params:[[{action:"AlphaTo",params:[a,t]},{action:"AlphaTo",params:[e,o]}]]}]}]]}),r=(e,a)=>({type:"text",once:!0,layer:"effects",when:t=>{const{calcs:{isOwner:o},stateExtra:{gameData:{showEnemyNames:r,showMyNames:s}}}=t;return(o&&s[e]||!o&&r[e])&&(!a||a(t))},payload:{text:{$calc:"displayName"},style:{align:"center",fill:{$calc:"playerColorHex"},fontFamily:"Roboto, sans-serif",fontSize:55,stroke:"#111",strokeThickness:15},anchor:{x:.5,y:1.7}}}),s=(e,a,t,o)=>({action:"Spawn",params:[[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"ScaleTo",params:[{$rel:"scale.x",koef:1.2},{$rel:"scale.y",koef:1.2},1]},{action:"ScaleTo",params:[{$rel:"scale.x"},{$rel:"scale.y"},1]}]]}]},{action:"Repeat",params:[{action:"Sequence",params:[[{action:"AlphaTo",params:[e,.1]},{action:"AlphaTo",params:[a,.2]},{action:"DelayTime",params:[{$random:2}]},{action:"AlphaTo",params:[t,.2]},{action:"AlphaTo",params:[o,2.8]}]]}]}]]}),n=t(0),i=t.n(n);var c={data:{x:{$state:"x",koef:100},y:{$state:"y",koef:100}},calculations:[{id:"isOwner",props:["user"],func:({state:{user:e},stateExtra:{gameData:{player:a}}})=>void 0===e?void 0:a==e},{id:"playerColorHex",props:["user"],func:({stateExtra:{users:e},state:{user:a}})=>e[a].color||"#ffffff"},{id:"playerColor",props:["user"],func:({calcs:{playerColorHex:e}})=>parseInt(e.substr(1),16)},{id:"playerColorIntense",props:["user"],func:({calcs:{isOwner:e}})=>65280},{id:"viewBox",func:({world:{options:{VIEW_BOX:e}}})=>e},{id:"hasEffect",func:({state:{effects:e},stateExtra:{gameTime:a}})=>e&&Object.values(e).some(e=>!!i.a.POWER_INFO[e.power]&&e.endTime>a)},{id:"decorations",func:({world:{decorations:e=[]}})=>e}],processors:[{type:"draw",once:!0,when:({state:{_isDisabled:e}})=>!!e,layer:"effects",payload:{drawings:[{method:"beginFill",params:[16711680]},{method:"drawRect",params:[-50,-50,100,100]},{method:"endFill"}],blendMode:1},actions:[o(0,.5,.3,1.5)]},{type:"sprite",layer:"effects",id:"flare",props:["hasEffect"],payload:{texture:"flare3",width:300,height:300,alpha:0,blendMode:1,tint:16711680},when:({calcs:{hasEffect:e}})=>e,actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"AlphaTo",params:[.4,.2]},{action:"AlphaTo",params:[0,1]},{action:"DelayTime",params:[2]}]]}]},{action:"Repeat",params:[{action:"RotateBy",params:[2*Math.PI,1]}]}]}]},E={texture:"constructedWall",processors:[{type:"sprite",once:!0,payload:{width:100,height:100,blendMode:1}},{type:"draw",once:!0,when:({state:{hits:e,hitsMax:a}})=>1===e&&a>1,layer:"effects",payload:{drawings:[{method:"beginFill",params:[16711680]},{method:"drawRect",params:[-50,-50,100,100]},{method:"endFill"}],blendMode:1},actions:[o(0,.2,.3,1.5)]}],zIndex:0},l={texture:"constructionSite",processors:[{id:"siteProgress",type:"siteProgress",layer:"effects",props:["progress","progressTotal"],payload:{color:{$calc:"playerColor"},radius:20,lineWidth:10,progress:{$state:"progress"},progressTotal:{$state:"progressTotal"}},actions:[o(.8,.3,1,1)]}],disappearProcessor:{type:"disappear"},zIndex:18},R=()=>({id:"resourcesTotal",func:({state:e})=>_.reduce(e.store,(e,a)=>a+e,0)}),p={texture:"rectangle",calculations:[R(),{id:"energyBackgroundHeight",func:({state:{storeCapacity:e},calcs:{resourcesTotal:a}})=>50*a/(e||a)},{id:"energyHeight",func:({state:{store:e={},storeCapacity:a},calcs:{resourcesTotal:t}})=>50*(e.energy||0)/(a||t)},{id:"powerHeight",func:({state:{store:e={},storeCapacity:a},calcs:{resourcesTotal:t}})=>50*((e.power||0)+(e.energy||0))/(a||t)}],processors:[{type:"sprite",id:"border",once:!0,payload:{width:60,height:70,tint:1579032}},{id:"internalBorder",type:"sprite",once:!0,payload:{width:40,height:50,tint:89478485}},{type:"sprite",id:"otherResourcesBar",props:["store","energyBackgroundHeight","resourcesTotal"],shouldRun:({state:{store:e={}},calcs:{resourcesTotal:a}})=>e.energy||0+e.power||0<a,payload:{pivot:{y:{$calc:"energyBackgroundHeight"}},y:25,width:40,height:{$calc:"energyBackgroundHeight"},tint:16777215}},{type:"sprite",id:"powerBar",props:["store","resourcesTotal"],shouldRun:({state:{store:e={}}})=>e.power>0,payload:{pivot:{y:{$calc:"powerHeight"}},y:25,width:40,height:{$calc:"powerHeight"},tint:15998771}},{type:"sprite",id:"energyBar",props:["store","resourcesTotal"],shouldRun:({state:{store:e={}}})=>e.energy>0,payload:{pivot:{y:{$calc:"energyHeight"}},y:25,width:40,height:{$calc:"energyHeight"},tint:16770413}},{type:"sprite",once:!0,layer:"lighting",props:["resourcesTotal"],shouldRun:({calcs:{resourcesTotal:e}})=>e>0,payload:{texture:"glow",width:100,height:100,alpha:1}}],zIndex:4},d={texture:"controller",calculations:[{id:"level1Visible",props:["level"],func:({state:{level:e}})=>e>=1},{id:"level2Visible",props:["level"],func:({state:{level:e}})=>e>=2},{id:"level3Visible",props:["level"],func:({state:{level:e}})=>e>=3},{id:"level4Visible",props:["level"],func:({state:{level:e}})=>e>=4},{id:"level5Visible",props:["level"],func:({state:{level:e}})=>e>=5},{id:"level6Visible",props:["level"],func:({state:{level:e}})=>e>=6},{id:"level7Visible",props:["level"],func:({state:{level:e}})=>e>=7},{id:"level8Visible",props:["level"],func:({state:{level:e}})=>e>=8},{id:"downgradeOpacity",func:({state:{level:e,downgradeTime:a},stateExtra:{gameTime:t}})=>{const{CONTROLLER_DOWNGRADE:o}=i.a;return a&&e&&t?(o[e]-(a-t))/o[e]:0}},{id:"progressTotal",func:({state:{level:e}})=>{const{CONTROLLER_LEVELS:a}=i.a;return a[e]}}],processors:[{type:"circle",once:!0,payload:{alpha:.05,color:3407667,radius:110},shouldRun:({state:{reservation:e},stateExtra:{gameData:{player:a}}})=>e&&e.user===a,actions:[o(.05,.4,1,1)]},{type:"circle",once:!0,payload:{alpha:.05,color:16724787,radius:110},shouldRun:({state:{upgradeBlocked:e,reservation:a},stateExtra:{gameTime:t,gameData:{player:o}}})=>e&&e>t||a&&a.user!==o,actions:[o(.05,.4,1,1)]},{type:"circle",once:!0,payload:{alpha:.05,color:16724787,radius:110},shouldRun:({state:{upgradeBlocked:e,reservation:a},stateExtra:{gameTime:t,gameData:{player:o}}})=>e&&e>t||a&&a.user!==o,actions:[o(.05,.4,1,1)]},{id:"safeMode1",type:"circle",once:!0,payload:{alpha:.05,color:16765312,radius:110},shouldRun:({state:{safeMode:e},stateExtra:{gameTime:a}})=>e&&e>a,actions:[o(.05,.4,1,1)]},{type:"circle",once:!0,payload:{alpha:.05,color:16777215,radius:92}},{type:"sprite",layer:"effects",once:!0,payload:{texture:"glow",alpha:.1,tint:16765312,width:1,height:1,blendMode:1},shouldRun:({state:{safeMode:e},stateExtra:{gameTime:a}})=>e&&e>a,actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"Spawn",params:[[{action:"ScaleTo",params:[50,50,1.5]},{action:"AlphaTo",params:[0,1.5]}]]},{action:"Spawn",params:[[{action:"ScaleTo",params:[0,0,0]},{action:"AlphaTo",params:[.05,0]}]]},{action:"DelayTime",params:[6]}]]}]}]},{type:"sprite",layer:"effects",props:["isPowerEnabled"],payload:{texture:"flare1",alpha:.4,tint:16711680,width:1,height:1,blendMode:1},when:({state:{isPowerEnabled:e}})=>!!e,actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"Spawn",params:[[{action:"ScaleTo",params:[20,20,1]},{action:"AlphaTo",params:[0,1]}]]},{action:"Spawn",params:[[{action:"ScaleTo",params:[0,0,0]},{action:"AlphaTo",params:[.4,0]}]]},{action:"DelayTime",params:[5]}]]}]}]},{type:"sprite",once:!0,payload:{tint:0,width:200,height:200}},{type:"sprite",props:["level1Visible"],payload:{texture:"controller-level",width:100,height:100,anchor:{y:1},visible:{$calc:"level1Visible"}}},{type:"sprite",props:["level2Visible"],payload:{texture:"controller-level",width:100,height:100,anchor:{y:1},rotation:2*Math.PI/8,visible:{$calc:"level2Visible"}}},{type:"sprite",props:["level3Visible"],payload:{texture:"controller-level",width:100,height:100,anchor:{y:1},rotation:2*Math.PI/8*2,visible:{$calc:"level3Visible"}}},{type:"sprite",props:["level4Visible"],payload:{texture:"controller-level",width:100,height:100,anchor:{y:1},rotation:2*Math.PI/8*3,visible:{$calc:"level4Visible"}}},{type:"sprite",props:["level5Visible"],payload:{texture:"controller-level",width:100,height:100,anchor:{y:1},rotation:2*Math.PI/8*4,visible:{$calc:"level5Visible"}}},{type:"sprite",props:["level6Visible"],payload:{texture:"controller-level",width:100,height:100,anchor:{y:1},rotation:2*Math.PI/8*5,visible:{$calc:"level6Visible"}}},{type:"sprite",props:["level7Visible"],payload:{texture:"controller-level",width:100,height:100,anchor:{y:1},rotation:2*Math.PI/8*6,visible:{$calc:"level7Visible"}}},{type:"sprite",props:["level8Visible"],payload:{texture:"controller-level",width:100,height:100,anchor:{y:1},rotation:2*Math.PI/8*7,visible:{$calc:"level8Visible"}}},{type:"userBadge",props:["user","level"]},{id:"siteProgress",type:"siteProgress",props:["progress","progressTotal","level"],payload:{color:16777215,radius:37,lineWidth:0,progress:{$state:"progress"},progressTotal:{$calc:"progressTotal"}},when:({state:{progress:e}})=>e>0,actions:[o(.8,.3,1,1)]},{type:"circle",props:["level"],payload:{radius:40,strokeColor:526344,strokeWidth:10}},{id:"downgrade",type:"sprite",once:!0,layer:"effects",payload:{alpha:0,width:200,height:200,tint:16724787}},{type:"runAction",payload:{id:"downgrade"},actions:[{action:"Sequence",params:[[{action:"AlphaTo",params:[{$calc:"downgradeOpacity"},{$processorParam:"tickDuration",koef:.2}]},{action:"AlphaTo",params:[0,{$processorParam:"tickDuration",koef:.8}]}]]}]},{type:"sprite",once:!0,layer:"lighting",props:["user"],payload:{texture:"glow",width:1200,height:1200,alpha:.5}},{type:"sprite",once:!0,layer:"lighting",props:["user"],shouldRun:({state:{user:e}})=>!!e,payload:{texture:"glow",width:500,height:500,alpha:1}}],zIndex:4};const O=(e,a,t,o)=>{let r=Math.atan2(o-a,t-e)+Math.PI/2;return r>Math.PI?r-=2*Math.PI:r<-Math.PI&&(r+=2*Math.PI),r};var T={calculateAngle:O,convertGameXYToWorld:({x:e,y:a},{CELL_SIZE:t})=>({x:t*e,y:t*a}),scaleGameToWorld:(e,{CELL_SIZE:a})=>a*e};const C=({state:{user:e}})=>"3"===e||"2"===e,S=(...e)=>!C(...e);var h={texture:"creep",calculations:[{id:"displayName",func:({calcs:{isOwner:e},state:{name:a,user:t},stateExtra:{users:o}})=>e?a:o[t].username},{id:"rotation",props:["x","y"],func:({prevState:{x:e,y:a}={},state:{x:t,y:o}})=>{const{calculateAngle:r}=T;return void 0!==e&&void 0!==a?r(e,a,t,o):0}},R(),{id:"resourcesTotalRadius",func:({state:{storeCapacity:e},calcs:{resourcesTotal:a}})=>20*Math.min(1,a/e)},{id:"energyRadius",func:({state:{store:e,storeCapacity:a}})=>20*Math.min(1,(e.energy||0)/a)},{id:"powerRadius",func:({state:{store:e,storeCapacity:a}})=>20*Math.min(1,((e.energy||0)+(e.power||0))/a)},{id:"safeMode",func:({stateExtra:e,state:{user:a},stateExtra:{controller:t,gameTime:o,objects:r}})=>(void 0===t&&(t=r.find(e=>"controller"===e.type)||null,e.controller=t),t&&t.safeMode>o&&t.user!==a?.5:1)}],processors:[{type:"container",once:"true",payload:{id:"mainContainer"}},{type:"container",once:"true",payload:{id:"decorationContainer",parentId:"mainContainer"}},{type:"creepDecoration",props:["spawning","decorations"],when:({state:{spawning:e}})=>!e,payload:{parentId:"decorationContainer"}},{type:"circle",once:!0,payload:{parentId:"mainContainer",color:2105376,radius:50},when:S},{type:"creepBuildBody",props:["body"],payload:{parentId:"mainContainer"},when:S},{type:"circle",once:!0,payload:{parentId:"mainContainer",color:0,radius:32},when:S},{type:"userBadge",payload:{parentId:"mainContainer",radius:26,color:{$calc:"playerColor"}},when:S},{type:"circle",props:["store","resourcesTotal"],when:({state:{store:e={},user:a},calcs:{resourcesTotal:t}})=>"3"!==a&&"2"!==a&&t>0&&(e.energy||0+e.power||0<t),payload:{parentId:"mainContainer",radius:{$calc:"resourcesTotalRadius"},color:16777215}},{type:"circle",props:["store"],when:({state:{store:e={},user:a}})=>"3"!==a&&"2"!==a&&e.power>0,payload:{parentId:"mainContainer",radius:{$calc:"powerRadius"},color:15998771}},{type:"circle",props:["store"],when:({state:{store:e={},user:a}})=>"3"!==a&&"2"!==a&&e.energy>0,payload:{parentId:"mainContainer",radius:{$calc:"energyRadius"},color:16770413}},{type:"sprite",once:!0,payload:{parentId:"mainContainer",texture:"creep-npc",width:100,height:100},when:C},{type:"creepActions",payload:{parentId:"mainContainer"},props:"*"},{type:"sprite",once:!0,layer:"lighting",when:e=>{const{state:{spawning:a}}=e;return!a&&S(e)},payload:{parentId:"mainContainer",texture:"creep-mask",width:100,height:100,alpha:1}},{type:"sprite",layer:"lighting",once:!0,when:C,payload:{parentId:"mainContainer",texture:"glow",width:100,height:100,alpha:.5}},{type:"sprite",layer:"lighting",once:!0,shouldRun:({state:{spawning:e}})=>!e,payload:{parentId:"mainContainer",texture:"glow",width:400,height:400,alpha:.2}},r("creeps",({state:{spawning:e}})=>!e),{type:"say",layer:"effects",when:({state:{actionLog:{say:e}={}},stateExtra:{gameData:{showCreepSpeech:a}},calcs:{isOwner:t}})=>!!a&&!!e&&(e.isPublic||t),payload:{say:{$state:"actionLog.say"}}},{id:"rangedMassAttack",type:"circle",layer:"effects",once:!0,payload:{alpha:0,color:6127794,radius:300,blendMode:1}},{type:"runAction",payload:{id:"rangedMassAttack"},when:({state:{actionLog:{rangedMassAttack:e}={}}})=>!!e,actions:[{action:"Sequence",params:[[{action:"Spawn",params:[[{action:"ScaleTo",params:[0,0,0]},{action:"AlphaTo",params:[.4,0]}]]},{action:"Spawn",params:[[{action:"Ease",params:[{action:"ScaleTo",params:[1,1,{$processorParam:"tickDuration",koef:.6}]}]},{action:"Ease",params:[{action:"AlphaTo",params:[0,{$processorParam:"tickDuration",koef:.6}]}]}]]}]]}]}],actions:[{id:"moveTo",props:["x","y"],actions:[{action:"Ease",params:[{action:"MoveTo",params:[{$state:"x",koef:100},{$state:"y",koef:100},{$processorParam:"tickDuration"}]},"EASE_IN_OUT_QUAD"]}]},{id:"rotateTo",props:["rotation"],targetId:"mainContainer",actions:[{action:"RotateTo",params:[{$calc:"rotation"},{$processorParam:"tickDuration",koef:.2}]}]},{id:"safeModeAlpha",props:["safeMode"],targetId:"mainContainer",actions:[{action:"AlphaTo",params:[{$calc:"safeMode"},0]}]}],disappearProcessor:{type:"disappear"},zIndex:6};const y={biomass:8695826,metal:9793372,mist:14314485,silicon:5023717};var u={calculations:[{id:"deposit",props:["depositType"],func:({state:{depositType:e}})=>`deposit-${e}`},{id:"deposit-fill",props:["depositType"],func:({state:{depositType:e}})=>`deposit-${e}-fill`},{id:"color",props:["depositType"],func:({state:{depositType:e}})=>y[e]},{id:"harvested",props:["harvested"],func:({state:{depositType:e,harvested:a=0}})=>Math.max(0,.6-a/1e5)}],processors:[{type:"container",once:"true",payload:{id:"container"}},{type:"runAction",once:!0,when:({state:{cooldownTime:e},stateExtra:{gameTime:a}})=>e&&e>=a,payload:{id:"container"},actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"Ease",params:[{action:"ScaleTo",params:[.7,.7,1]}]},{action:"Ease",params:[{action:"ScaleTo",params:[1,1,.3]}]}]]}]}]},{type:"sprite",payload:{parentId:"container",texture:{$calc:"deposit-fill"},width:160,height:160,alpha:{$calc:"harvested"},tint:{$calc:"color"}}},{type:"sprite",payload:{parentId:"container",texture:{$calc:"deposit"},width:160,height:160,tint:{$calc:"color"}}},{type:"sprite",once:!0,layer:"lighting",payload:{parentId:"container",texture:{$calc:"deposit"},width:160,height:160,alpha:1}},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:700,height:700,alpha:1,tint:{$calc:"color"}},actions:[s(.7,.4,1,.4)]}],zIndex:1};const A=68,U=80,m=100;var g={calculations:[{id:"size",props:["storeCapacityResource"],func:({state:{storeCapacityResource:e}})=>e&&e.energy>=200?m:e&&e.energy>=100?U:A},{id:"resourceScale",props:["store","storeCapacityResource"],func:({state:{store:e,storeCapacityResource:a}})=>a?Math.min(1,(e.energy||0)/a.energy):0}],processors:[{type:"sprite",once:!0,when:({state:{storeCapacityResource:e}})=>!e||e.energy<100,payload:{texture:"extension-border50",tint:{$calc:"playerColor"},width:100,height:100}},{type:"sprite",once:!0,when:({state:{storeCapacityResource:e}})=>e&&100===e.energy,payload:{texture:"extension-border100",tint:{$calc:"playerColor"},width:100,height:100}},{type:"sprite",once:!0,when:({state:{storeCapacityResource:e}})=>e&&200===e.energy,payload:{texture:"extension-border200",tint:{$calc:"playerColor"},width:100,height:100}},{type:"sprite",props:["storeCapacityResource"],payload:{texture:"extension",width:{$calc:"size"},height:{$calc:"size"}}},{id:"resourceCircle",props:["storeCapacityResource"],type:"circle",payload:{radius:{$calc:"size",koef:.32},color:16770413,scale:{x:{$calc:"resourceScale"},y:{$calc:"resourceScale"}}}},{type:"runAction",props:["resourceScale"],payload:{id:"resourceCircle"},actions:[{action:"ScaleTo",params:[{$calc:"resourceScale"},{$calc:"resourceScale"},{$processorParam:"tickDuration"}]}]},{type:"sprite",once:!0,layer:"lighting",shouldRun:({state:{store:e}})=>e&&e.energy>0,payload:{texture:"glow",width:100,height:100,alpha:1}},{type:"sprite",once:!0,layer:"lighting",shouldRun:({state:{store:e,storeCapacityResource:a}})=>(e.energy||0)>0&&a&&50===a.energy,payload:{texture:"glow",width:200,height:200,alpha:.7}},{type:"sprite",once:!0,layer:"lighting",shouldRun:({state:{store:e,storeCapacityResource:a}})=>(e.energy||0)>0&&a&&100===a.energy,payload:{texture:"glow",width:220,height:220,alpha:.7}},{type:"sprite",once:!0,layer:"lighting",shouldRun:({state:{store:e,storeCapacityResource:a}})=>(e.energy||0)>0&&a&&200===a.energy,payload:{texture:"glow",width:250,height:250,alpha:.7}}],zIndex:7},I={processors:[{id:"main",type:"sprite",once:"true",payload:{texture:"extractor",width:200,tint:{$calc:"playerColor"}}},{type:"runAction",once:!0,when:({state:{cooldown:e}})=>e>0,until:({state:{cooldown:e}})=>!e||e<=0,payload:{id:"main"},actions:[{action:"Repeat",params:[{action:"RotateBy",params:[2*Math.PI,4]}]}]}],zIndex:0};const N=({state:{cooldownTime:e},stateExtra:{gameTime:a}})=>e&&e>=a,w=({state:{level:e}})=>e>0,L=(...e)=>w(...e)&&!(({state:{effects:e},stateExtra:{gameTime:a}})=>e&&Object.values(e).some(({power:e,endTime:t})=>e===n.PWR_OPERATE_FACTORY&&t>=a))(...e);var P={texture:"rectangle",calculations:[R(),{id:"energyBackgroundHeight",func:({state:{storeCapacity:e},calcs:{resourcesTotal:a}})=>50*a/(e||a)},{id:"energyHeight",func:({state:{store:e={},storeCapacity:a},calcs:{resourcesTotal:t}})=>50*(e.energy||0)/(a||t)},{id:"powerHeight",func:({state:{store:e={},storeCapacity:a},calcs:{resourcesTotal:t}})=>50*(e.power||0+e.energy||0)/(a||t)},{id:"factory-lvl",props:["level"],func:({state:{level:e=0}})=>`factory-lvl${e}`}],processors:[{type:"sprite",once:"true",payload:{texture:"factory-border",width:200,height:200,tint:{$calc:"playerColor"}}},{type:"sprite",once:!0,payload:{texture:"factory",width:200,height:200}},{id:"factory-highlight",type:"sprite",once:!0,payload:{texture:"factory-highlight",width:200,height:200,alpha:.4}},{type:"runAction",when:N,payload:{id:"factory-highlight"},actions:[{action:"Sequence",params:[[{action:"AlphaTo",params:[1,{$processorParam:"tickDuration",koef:.2}]},{action:"AlphaTo",params:[0,{$processorParam:"tickDuration",koef:.8}]}]]}]},{type:"runAction",when:(...e)=>!N(...e),payload:{id:"factory-highlight"},actions:[{action:"AlphaTo",params:[.4,0]}]},{type:"sprite",once:!0,payload:{texture:"factory-lvl0",width:200,height:200}},{id:"level",type:"sprite",when:w,once:!0,payload:{texture:{$calc:"factory-lvl"},width:200,height:200}},{type:"runAction",when:L,once:!0,payload:{id:"level"},actions:[o(0,1,.2,.8)]},{type:"runAction",when:(...e)=>!L(...e),payload:{id:"level"},actions:[{action:"AlphaTo",params:[1,0]}]},{id:"internalBorder",type:"sprite",once:!0,payload:{width:50,height:50,tint:5592405}},{type:"sprite",id:"otherResourcesBar",props:["store","energyBackgroundHeight","resourcesTotal"],shouldRun:({state:{store:e={}},calcs:{resourcesTotal:a}})=>e.energy||0+e.power||0<a,payload:{pivot:{y:{$calc:"energyBackgroundHeight"}},y:25,width:50,height:{$calc:"energyBackgroundHeight"},tint:16777215}},{id:"powerBar",type:"sprite",props:["store","resourcesTotal"],shouldRun:({state:{store:e={}}})=>e.power>0,payload:{pivot:{y:{$calc:"powerHeight"}},y:25,width:50,height:{$calc:"powerHeight"},tint:15998771}},{id:"energyBar",type:"sprite",props:["store","resourcesTotal"],shouldRun:({state:{store:e={}}})=>e.energy>0,payload:{pivot:{y:{$calc:"energyHeight"}},y:25,width:50,height:{$calc:"energyHeight"},tint:16441214}},{type:"sprite",once:!0,layer:"lighting",shouldRun:({calcs:{resourcesTotal:e}})=>e>0,payload:{texture:"glow",width:200,height:200,alpha:1}},{type:"sprite",layer:"lighting",once:!0,payload:{texture:"glow",width:800,height:800,alpha:.5}}],zIndex:7};var M={processors:[{type:"sprite",props:["user"],layer:"effects",payload:{texture:"flag",width:200,height:200,tint:{$calc:"playerColor"}}},{type:"text",props:["user"],layer:"effects",shouldRun:({stateExtra:{gameData:{showFlagsNames:e}}})=>!!e,payload:{text:{$state:"name"},style:{align:"center",fill:{$calc:"flagColor"},fontFamily:"Roboto, sans-serif",fontSize:60,stroke:"#111",strokeThickness:10},anchor:{x:.5,y:-.5}}}],actions:[{id:"moveTo",props:["x","y"],actions:[{action:"MoveTo",params:[{$state:"x",koef:100},{$state:"y",koef:100},0]}]}]};const D={texture:"lab-mineral",tint:7829367,anchor:{y:1},scale:{x:.6875,y:.6875},y:25},H=16770413,f=32,x=67,G=10;var Y={calculations:[R(),{id:"mineralPathScale",props:["store","storeCapacity","storeCapacityResource"],func:({state:{store:e,storeCapacity:a,storeCapacityResource:t},calcs:{resourcesTotal:o}})=>{const{scale:{x:r}}=D,s=_(e).keys().filter(a=>"energy"!=a&&e[a]).first();if(!s)return 0;const n=t[s]||a-_.sum(t);return n?r*(e[s]||0)/n:0}},{id:"energyWidth",props:["store","storeCapacityResource"],func:({state:{store:e,storeCapacityResource:a}})=>a&&a.energy?x*(e.energy||0)/a.energy:0}],processors:[{type:"sprite",once:"true",payload:{texture:"lab",width:200,tint:{$calc:"playerColor"}}},{type:"sprite",once:"true",id:"lab-highlight",payload:{texture:"lab-highlight",width:200,alpha:0}},{type:"runAction",when:({state:{cooldownTime:e},stateExtra:{gameTime:a}})=>e&&e>a,payload:{id:"lab-highlight"},actions:[{action:"Sequence",params:[[{action:"AlphaTo",params:[.5,{$processorParam:"tickDuration",koef:.2}]},{action:"AlphaTo",params:[0,{$processorParam:"tickDuration",koef:.8}]}]]}]},{type:"sprite",once:"true",payload:D},{type:"sprite",props:["mineralPathScale"],payload:Object.assign({},D,{scale:{x:{$calc:"mineralPathScale"},y:{$calc:"mineralPathScale"}},tint:16777215})},{type:"draw",props:["energyWidth"],payload:{id:"energyRectangle",drawings:[{method:"beginFill",params:[H]},{method:"drawRect",params:[{$calc:"energyWidth",koef:-.5},f,{$calc:"energyWidth"},G]},{method:"endFill"}]}},{type:"creepActions",props:"*"},{type:"sprite",layer:"lighting",once:!0,shouldRun:({state:{store:e},calcs:{resourcesTotal:a}})=>a-(e.energy||0)>0,payload:{texture:"glow",width:150,height:150,alpha:1}},{id:"light",type:"sprite",once:!0,layer:"lighting",props:["store"],shouldRun:({state:{store:e},calcs:{resourcesTotal:a}})=>a-(e.energy||0)>0,payload:{texture:"glow",width:500,height:500,alpha:.3}},{id:"reactionLight",type:"sprite",layer:"effects",once:!0,payload:{texture:"glow",width:150,height:150,alpha:0,blendMode:1}},{type:"runAction",shouldRun:({state:e})=>e.actionLog&&e.actionLog.runReaction,payload:{id:"reactionLight"},actions:[{action:"Sequence",params:[[{action:"DelayTime",params:[{$processorParam:"tickDuration",koef:.3}]},{action:"AlphaTo",params:[1,{$processorParam:"tickDuration",koef:.15}]},{action:"AlphaTo",params:[0,{$processorParam:"tickDuration",koef:.55}]}]]}]},{type:"runAction",shouldRun:({state:e})=>e.actionLog&&e.actionLog.reverseReaction,payload:{id:"reactionLight"},actions:[{action:"Sequence",params:[[{action:"AlphaTo",params:[1,{$processorParam:"tickDuration",koef:.15}]},{action:"AlphaTo",params:[0,{$processorParam:"tickDuration",koef:.55}]},{action:"DelayTime",params:[{$processorParam:"tickDuration",koef:.3}]}]]}]}],zIndex:15},W={calculations:[{id:"energyScale",props:["store","storeCapacityResource"],func:({state:{store:e,storeCapacityResource:a}})=>a?Math.min(1,(e.energy||0)/a.energy):0}],processors:[{type:"sprite",once:"true",payload:{texture:"link-border",width:100,height:100,tint:{$calc:"playerColor"}}},{type:"sprite",once:"true",payload:{texture:"link",width:100,height:100}},{type:"container",once:"true",payload:{id:"energyContainer"}},{type:"sprite",once:"true",payload:{id:"energy",parentId:"energyContainer",texture:"link-energy",width:50,height:50}},{type:"runAction",props:["energyScale"],payload:{id:"energyContainer"},actions:[{action:"ScaleTo",params:[{$calc:"energyScale"},{$calc:"energyScale"},{$processorParam:"tickDuration"}]}]},{type:"creepActions",props:"*"},{type:"sprite",once:!0,layer:"lighting",shouldRun:({state:{store:e}})=>e.energy>0,payload:{texture:"glow",width:100,height:100,alpha:1}},{id:"light",once:!0,type:"sprite",layer:"lighting",shouldRun:({state:{store:e}})=>e.energy>0,payload:{texture:"glow",width:400,height:400,alpha:.5}}],zIndex:9};const $={L:{foreground:9041061,background:4153671},U:{foreground:8967927,background:1794431},K:{foreground:9662719,background:3349120},Z:{foreground:15913611,background:5852467},X:{foreground:16743034,background:5187110},O:{foreground:13421772,background:5066061},H:{foreground:13421772,background:5066061}};var v={calculations:[{id:"foregroundColor",once:!0,func:({state:{mineralType:e}})=>$[e].foreground},{id:"backgroundColor",once:!0,func:({state:{mineralType:e}})=>$[e].background}],processors:[{type:"draw",once:!0,payload:{drawings:[{method:"lineStyle",params:[10,{$calc:"foregroundColor"},1]},{method:"beginFill",params:[{$calc:"backgroundColor"}]},{method:"drawCircle",params:[0,0,54]},{method:"endFill"}]}},{type:"text",once:!0,payload:{text:{$state:"mineralType"},style:{align:"center",fill:{$calc:"foregroundColor"},fontFamily:"Roboto, serif",fontSize:82,fontWeight:"bold"},anchor:{x:.5,y:.5}}},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:200,height:200,alpha:1}},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:700,height:700,alpha:.7,tint:{$calc:"foregroundColor"}},actions:[s(.7,.4,1,.4)]}],zIndex:2};const k={action:"Repeat",params:[{action:"Sequence",params:[[{action:"Ease",params:[{action:"ScaleTo",params:[.6,.6,1]},"EASE_IN_OUT_QUAD"]},{action:"Ease",params:[{action:"ScaleTo",params:[1,1,1]},"EASE_IN_OUT_QUAD"]}]]}]},b=({state:{landTime:e},stateExtra:{gameTime:a}})=>e<=a,K=(...e)=>!b(...e);var B={calculations:[{id:"landTimeSpeed",func:({state:{landTime:e},stateExtra:{gameTime:a}})=>e<=a?Number.MAX_VALUE:Math.max(.4,100*Math.round((e-a)/100)/5e4*8)},{id:"offsetToZeroX",func:({state:{x:e},world:{options:{CELL_SIZE:a}}})=>-(e+.5)*a},{id:"offsetToZeroY",func:({state:{y:e},world:{options:{CELL_SIZE:a}}})=>-(e+.5)*a}],processors:[{type:"sprite",layer:"effects",once:!0,payload:{texture:"nuke",alpha:.7},when:K,actions:[k]},{type:"sprite",layer:"effects",once:!0,payload:{texture:"nuke",blur:2,blendMode:3},when:K,actions:[k]},{type:"circle",layer:"effects",once:!0,payload:{color:16720418,radius:110,blendMode:1,alpha:.5},when:K,actions:[k]},{type:"circle",layer:"effects",props:["landTimeSpeed"],payload:{color:16711680,radius:600,alpha:0,blendMode:1,blur:30},when:K,actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"Spawn",params:[[{action:"ScaleTo",params:[0,0,{$calc:"landTimeSpeed"}]},{action:"AlphaTo",params:[.4,{$calc:"landTimeSpeed"}]},{action:"FilterTo",params:[0,"blur",.5,{$calc:"landTimeSpeed",koef:.5}]}]]},{action:"Spawn",params:[[{action:"ScaleTo",params:[1,1,0]},{action:"AlphaTo",params:[0,0]},{action:"FilterTo",params:[0,"blur",30,0]}]]}]]}]}]},{type:"sprite",once:!0,layer:"lighting",when:K,payload:{texture:"glow",tint:16729156,width:700,height:700}},{type:"sprite",layer:"effects",once:!0,payload:{texture:"glow",alpha:1,tint:16720418,width:1,height:1,blendMode:1},when:b,actions:[{action:"Spawn",params:[[{action:"Ease",params:[{action:"ScaleTo",params:[20,20,{$processorParam:"tickDuration"}]}]},{action:"AlphaTo",params:[0,{$processorParam:"tickDuration"}]}]]}]},{type:"draw",once:!0,layer:"effects",when:b,payload:{x:{$calc:"offsetToZeroX"},y:{$calc:"offsetToZeroY"},blendMode:1,alpha:.7,drawings:[{method:"beginFill",params:[16711680]},{method:"drawRect",params:[0,0,{$calc:"viewBox"},{$calc:"viewBox"}]},{method:"endFill"}]},actions:[{action:"Ease",params:[{action:"AlphaTo",params:[0,{$processorParam:"tickDuration"}]}]}]}]};const X={color:16770413,x:0,y:10,width:86,height:118},F=80;var Z={calculations:[{id:"energyTrianglePoints",props:["store","storeCapacityResource"],func:({state:{store:e,storeCapacityResource:a}})=>{const{x:t,y:o}=X;let{width:r,height:s}=X;const n=(e.energy||0)/a.energy;return[t-(r*=n)/2,o,t,o-(s*=n),t+r/2,o]}},{id:"gWidth",func:({state:{store:e,storeCapacityResource:a}})=>a&&a.G?F*(e.G||0)/a.G:0}],processors:[{type:"sprite",once:"true",payload:{texture:"nuker-border",width:300,height:300,y:-40,tint:{$calc:"playerColor"}}},{type:"sprite",once:"true",payload:{texture:"nuker",width:300,height:300,y:-40}},{type:"draw",props:["energyTrianglePoints"],payload:{id:"energyTriangle",drawings:[{method:"beginFill",params:[X.color]},{method:"drawPolygon",params:[{$calc:"energyTrianglePoints"}]},{method:"endFill"}]}},{type:"draw",props:["gWidth"],payload:{id:"gRectangle",drawings:[{method:"beginFill",params:[16777215]},{method:"drawRect",params:[{$calc:"gWidth",koef:-.5},35,{$calc:"gWidth"},15]},{method:"endFill"}]}},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:100,height:100}},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:800,height:800,alpha:.5}}],zIndex:7};var V={processors:[{type:"draw",once:!0,payload:{id:"border",drawings:[{method:"lineStyle",params:[5,{$calc:"playerColor"},1]},{method:"beginFill",params:[1118481]},{method:"drawEllipse",params:[0,0,45,40]},{method:"endFill"}]}},{type:"draw",once:!0,payload:{id:"eye",drawings:[{method:"lineStyle",params:[0,0,1]},{method:"beginFill",params:[{$calc:"playerColor"}]},{method:"drawEllipse",params:[0,0,20,20]},{method:"endFill"}]},actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"MoveTo",params:[20,0,.25]},{action:"DelayTime",params:[.25]},{action:"MoveTo",params:[0,15,.25]},{action:"DelayTime",params:[.25]},{action:"MoveTo",params:[-20,0,.25]},{action:"DelayTime",params:[.25]},{action:"MoveTo",params:[0,-15,.25]},{action:"DelayTime",params:[.25]}]]}]}]},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:800,height:800,alpha:.5}}],zIndex:10};var z={calculations:[{id:"radius",props:["store"],func:({state:{store:e}})=>{const{POWER_BANK_CAPACITY_MAX:a}=i.a;return Math.sqrt(e.power/a*3e3/Math.PI)}}],processors:[{type:"sprite",once:"true",payload:{texture:"powerBank",width:200,height:200}},{type:"draw",once:!0,payload:{id:"static",drawings:[{method:"lineStyle",params:[10,9240589,1]},{method:"beginFill",params:[15998771]},{method:"drawCircle",params:[0,0,{$calc:"radius"}]},{method:"endFill"}]},actions:[{action:"Repeat",params:[{action:"Spawn",params:[[{action:"Sequence",params:[[{action:"ScaleTo",params:[{$rel:"scale.x",koef:.6},{$rel:"scale.y",koef:.6},{$processorParam:"tickDuration",koef:.66}]},{action:"ScaleTo",params:[{$rel:"scale.x"},{$rel:"scale.y"},{$processorParam:"tickDuration",koef:.34}]}]]},{action:"Sequence",params:[[{action:"TintTo",params:[13832226,{$processorParam:"tickDuration",koef:.33}]},{action:"TintTo",params:[9240589,{$processorParam:"tickDuration",koef:.33}]},{action:"TintTo",params:[15998771,{$processorParam:"tickDuration",koef:.34}]}]]}]]}]}]},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:800,height:800,tint:16744576}}],zIndex:11};const q={commander:{pivotY:30,size:65},executor:{pivotY:30,size:45},operator:{pivotY:15,size:63}};var j={calculations:[{id:"displayName",func:({calcs:{isOwner:e},state:{name:a,user:t},stateExtra:{users:o}})=>e?a:o[t].username},{id:"rotation",props:["x","y"],func:({prevState:{x:e,y:a}={},state:{x:t,y:o}})=>void 0!==e&&void 0!==a?O(e,a,t,o):0},{id:"texture",props:["level"],func:({state:{level:e,className:a}})=>`${a}-lvl${Math.min(4,Math.ceil(e/6))}`},{id:"texture-light",func:({state:{className:e}})=>`${e}-lvl4`},{id:"badgePivotY",props:["className"],func:({state:{className:e}})=>q[e].pivotY},{id:"badgeSize",props:["className"],func:({state:{className:e}})=>q[e].size},{id:"safeMode",func:({stateExtra:e,state:{user:a},stateExtra:{controller:t,gameTime:o,objects:r}})=>(void 0===t&&(t=r.find(e=>"controller"===e.type)||null,e.controller=t),t&&t.safeMode>o&&t.user!==a?.5:1)}],processors:[{type:"container",once:"true",payload:{id:"mainContainer"}},{type:"sprite",props:["texture"],payload:{id:"sprite",parentId:"mainContainer",texture:{$calc:"texture"},width:180,height:180,zIndex:0,tint:13385022}},{type:"userBadge",props:["texture"],payload:{parentId:"mainContainer",radius:26,color:2236962,width:{$calc:"badgeSize"},height:{$calc:"badgeSize"},pivot:{y:{$calc:"badgePivotY"}}}},{type:"creepActions",payload:{parentId:"mainContainer"},props:"*"},{type:"powerInfluence",payload:{parentId:"mainContainer"},props:"*"},r("creeps"),{type:"say",layer:"effects",when:({state:{actionLog:{say:e}={}},stateExtra:{gameData:{showCreepSpeech:a}},calcs:{isOwner:t}})=>!!a&&!!e&&(e.isPublic||t),payload:{say:{$state:"actionLog.say"}}},{type:"sprite",layer:"lighting",once:!0,payload:{parentId:"mainContainer",texture:{$calc:"texture"},width:180,height:180,alpha:1}},{type:"sprite",layer:"lighting",once:!0,payload:{parentId:"mainContainer",texture:"glow",width:400,height:400,alpha:1,tint:16733525}},{type:"sprite",layer:"effects",once:!0,when:({state:{actionLog:{spawned:e}={}}})=>!!e,payload:{texture:"flare2",width:400,height:400,alpha:1,blendMode:1,tint:16716049},actions:[{action:"Sequence",params:[[{action:"Spawn",params:[[{action:"AlphaTo",params:[0,{$processorParam:"tickDuration",koef:.5}]},{action:"RotateBy",params:[Math.PI/8,{$processorParam:"tickDuration",koef:.5}]}]]}]]}]}],actions:[{id:"moveTo",props:["x","y"],actions:[{action:"Ease",params:[{action:"MoveTo",params:[{$state:"x",koef:100},{$state:"y",koef:100},{$processorParam:"tickDuration"}]},"EASE_IN_OUT_QUAD"]}]},{id:"rotateTo",props:["rotation"],targetId:"mainContainer",actions:[{action:"RotateTo",params:[{$calc:"rotation"},{$processorParam:"tickDuration",koef:.2}]}]},{id:"safeModeAlpha",props:["safeMode"],targetId:"mainContainer",actions:[{action:"AlphaTo",params:[{$calc:"safeMode"},0]}]}],disappearProcessor:{type:"disappear"},zIndex:13};const Q=2236962,J=75,ee=13421772,ae=7,te=2236962,oe=68,re=15998771,se=10,ne=1579032,ie=59,ce=5592405,Ee=38,le={color:15998771,radius:50,startAngle:-Math.PI/2,strokeWidth:10};var Re={calculations:[{id:"powerAngle",props:["store","storeCapacityResource"],func:({state:{store:e,storeCapacityResource:a}})=>le.startAngle+(a&&a.power?2*Math.PI*(e.power||0)/a.power:0)},{id:"resourceScale",props:["store","storeCapacity"],func:({state:{store:e,storeCapacityResource:a}})=>a&&a.energy?Math.min(1,(e.energy||0)/a.energy):0}],processors:[{type:"draw",once:!0,payload:{id:"static",drawings:[{method:"lineStyle",params:[ae,ee,1]},{method:"beginFill",params:[Q]},{method:"drawCircle",params:[0,0,J]},{method:"endFill"},{method:"lineStyle",params:[se,re,1]},{method:"beginFill",params:[te]},{method:"drawCircle",params:[0,0,oe]},{method:"endFill"},{method:"lineStyle",params:[0,0,1]},{method:"beginFill",params:[ne]},{method:"drawCircle",params:[0,0,ie]},{method:"endFill"}]}},{type:"userBadge",once:!0,payload:{parentId:"static",color:ce,radius:Ee}},{type:"draw",props:["powerAngle"],payload:{id:"arc",parentId:"static",drawings:[{method:"lineStyle",params:[le.strokeWidth,le.color,1]},{method:"arc",params:[0,0,le.radius,le.startAngle,{$calc:"powerAngle"}]}]}},{type:"runAction",props:["resourceScale"],payload:{id:"resourceCircle"},actions:[{action:"ScaleTo",params:[{$calc:"resourceScale"},{$calc:"resourceScale"},{$processorParam:"tickDuration"}]}]},{id:"resourceCircle",once:!0,type:"circle",payload:{parentId:"static",radius:Ee,color:16770413,scale:{x:{$calc:"resourceScale"},y:{$calc:"resourceScale"}}}},{type:"sprite",layer:"lighting",once:!0,payload:{texture:"glow",width:150,height:150,alpha:1}},{id:"glow",type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",alpha:.5,scale:{x:1,y:1}}},{type:"runAction",props:["store"],payload:{id:"glow"},actions:[{action:"Sequence",params:[[{action:"Spawn",params:[[{action:"TintTo",params:[16724787,{$processorParam:"tickDuration",koef:.2}]},{action:"AlphaTo",params:[1,{$processorParam:"tickDuration",koef:.2}]},{action:"ScaleTo",params:[2,2,{$processorParam:"tickDuration",koef:.2}]}]]},{action:"Spawn",params:[[{action:"TintTo",params:[16777215,{$processorParam:"tickDuration",koef:.8}]},{action:"AlphaTo",params:[.5,{$processorParam:"tickDuration",koef:.8}]},{action:"ScaleTo",params:[1,1,{$processorParam:"tickDuration",koef:.8}]}]]}]]}]}],actions:[{id:"resourceScale",targetId:"resourceCircle",props:["resourceScale"],actions:[{action:"ScaleTo",params:[{$calc:"resourceScale"},{$calc:"resourceScale"},{$processorParam:"tickDuration"}]}]}],zIndex:12};const pe=4,de=15,Oe=40,_e=5853222,Te=2,Ce=16770413,Se=60,he=[16777215,16764269,16768644];var ye={calculations:[{id:"energySize",props:["energy","energyCapacity"],func:({state:{energy:e,energyCapacity:a}})=>Se*e/a}],processors:[{type:"draw",once:!0,payload:{id:"static",tint:_e,drawings:[{method:"lineStyle",params:[15,16777215,1]},{method:"beginFill",params:[1118481]},{method:"drawRoundedRect",params:[-Oe/2,-Oe/2,Oe,Oe,de]},{method:"endFill"}]},actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"TintTo",params:[920580,pe/2]},{action:"TintTo",params:[_e,pe/2]}]]}]}]},{type:"draw",props:["energySize"],payload:{id:"energy",tint:Ce,drawings:[{method:"beginFill",params:[16777215]},{method:"drawRoundedRect",params:[{$calc:"energySize",koef:-.5},{$calc:"energySize",koef:-.5},{$calc:"energySize"},{$calc:"energySize"},de]},{method:"endFill"}]},actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"TintTo",params:[he[0],Te/4]},{action:"TintTo",params:[he[1],Te/4]},{action:"TintTo",params:[he[2],Te/4]},{action:"TintTo",params:[Ce,Te/4]}]]}]}]},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:800,height:800,tint:16777040,alpha:.5},actions:[s(.6,.4,.8,.4)]},{type:"sprite",layer:"lighting",once:!0,shouldRun:({state:{energy:e}})=>e>0,payload:{texture:"glow",width:150,height:150,tint:16777215}}],zIndex:2};const ue=13421772,Ae=70,Ue=1579032,me=59,ge=5592405,Ie=38,Ne={color:13421772,radius:50,startAngle:-Math.PI/2,strokeWidth:10};var we={calculations:[{id:"spawningAngle",func:({state:{name:e,spawning:a},stateExtra:{gameTime:t}})=>{const{spawnTime:o=t+.01,needTime:r=0}=a||{},s=o-t;return Ne.startAngle+(r?2*Math.PI*(r-s)/r:0)}},{id:"resourceScale",props:["store","storeCapacityResource"],func:({state:{store:e,storeCapacityResource:a}})=>a&&a.energy?(e.energy||0)/a.energy:0},{id:"displayName",func:({calcs:{isOwner:e},state:{name:a,user:t},stateExtra:{users:o}})=>e?a:o[t].username}],processors:[{type:"circle",once:!0,payload:{id:"static",radius:Ae,color:ue}},{type:"circle",once:!0,payload:{id:"black",parentId:"static",radius:me,color:Ue}},{type:"userBadge",once:!0,payload:{parentId:"black",color:ge,radius:Ie}},{type:"runAction",props:["spawning"],once:!0,shouldRun:({state:{spawning:e}})=>!!e,payload:{id:"static"},actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"Ease",params:[{action:"ScaleTo",params:[1.25,1.25,.5]}]},{action:"Ease",params:[{action:"ScaleTo",params:[1,1,2]},"EASE_IN_QUAD"]}]]}]}]},{type:"draw",props:["spawningAngle"],payload:{id:"arc",parentId:"static",drawings:[{method:"lineStyle",params:[Ne.strokeWidth,Ne.color,1]},{method:"arc",params:[0,0,Ne.radius,Ne.startAngle,{$calc:"spawningAngle"}]}]}},{id:"resourceCircle",once:!0,type:"circle",payload:{parentId:"static",radius:Ie,color:16770413,scale:{x:{$calc:"resourceScale"},y:{$calc:"resourceScale"}}}},{type:"sprite",layer:"lighting",props:["store"],shouldRun:({state:{store:e}})=>e.energy>0,payload:{texture:"glow",width:100,height:100,alpha:1}},{id:"light",type:"sprite",layer:"lighting",once:!0,payload:{texture:"glow",width:600,height:600,alpha:.5}},{type:"runAction",props:["spawning"],shouldRun:({state:{spawning:e}})=>!!e,once:!0,payload:{id:"light"},actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"Ease",params:[{action:"AlphaTo",params:[1,.5]}]},{action:"Ease",params:[{action:"AlphaTo",params:[.5,2]},"EASE_IN_QUAD"]}]]}]}]},r("spawns")],actions:[{id:"resourceScale",targetId:"resourceCircle",props:["resourceScale"],actions:[{action:"ScaleTo",params:[{$calc:"resourceScale"},{$calc:"resourceScale"},{$processorParam:"tickDuration"}]}]}],zIndex:8};var Le={texture:"storage",calculations:[R(),{id:"energyBackgroundHeight",func:({calcs:{resourcesTotal:e},state:{storeCapacity:a}})=>140*e/Math.max(a||i.a.STORAGE_CAPACITY,e)},{id:"energyHeight",func:({calcs:{resourcesTotal:e},state:{store:a,storeCapacity:t}})=>140*a.energy/Math.max(t||i.a.STORAGE_CAPACITY,e)},{id:"powerHeight",func:({calcs:{resourcesTotal:e},state:{store:a,storeCapacity:t}})=>140*((a.power||0)+(a.energy||0))/Math.max(t||i.a.STORAGE_CAPACITY,e)}],processors:[{id:"border",type:"sprite",once:!0,payload:{texture:"storage-border",width:200,height:200,tint:{$calc:"playerColor"}}},{type:"sprite",once:!0,payload:{texture:"storage",width:200,height:200}},{id:"otherResourcesBar",type:"sprite",props:["store","energyBackgroundHeight","resourcesTotal"],shouldRun:({state:{store:e},calcs:{resourcesTotal:a}})=>e.energy+(e.power||0)<a,payload:{texture:"rectangle",pivot:{y:{$calc:"energyBackgroundHeight"}},y:70,width:110,height:{$calc:"energyBackgroundHeight"},tint:16777215}},{id:"powerBar",type:"sprite",props:["store","resourcesTotal"],shouldRun:({state:{store:e}})=>e.power>0,payload:{texture:"rectangle",pivot:{y:{$calc:"powerHeight"}},y:70,width:110,height:{$calc:"powerHeight"},tint:15998771}},{type:"sprite",id:"energyBar",props:["store","resourcesTotal"],shouldRun:({state:{store:e}})=>e.energy>0,payload:{texture:"rectangle",pivot:{y:{$calc:"energyHeight"}},y:70,width:110,height:{$calc:"energyHeight"},tint:16770413}},{type:"sprite",once:!0,layer:"lighting",shouldRun:({calcs:{resourcesTotal:e}})=>e>0,payload:{texture:"glow",width:200,height:200,alpha:1}},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:800,height:800,alpha:.5}}],zIndex:7};const Pe=({state:{cooldownTime:e},stateExtra:{gameTime:a}})=>e&&e>=a;var Me={calculations:[R(),{id:"restResourceSize",props:["store","storeCapacity","resourcesTotal"],func:({state:{store:e={},storeCapacity:a},calcs:{resourcesTotal:t}})=>{if(t<=(e.energy||0)+(e.power||0))return 0;const o=76*t/(a||i.a.TERMINAL_CAPACITY);return Math.min(o,76)}},{id:"powerResourceSize",props:["store","storeCapacity"],func:({state:{store:e={},storeCapacity:a}})=>{const t=76*((e.energy||0)+(e.power||0))/(a||i.a.TERMINAL_CAPACITY);return Math.min(t,76)}},{id:"energyResourceHeight",props:["store","storeCapacity"],func:({state:{store:e={},storeCapacity:a}})=>{const t=76*(e.energy||0)/(a||i.a.TERMINAL_CAPACITY);return Math.min(t,76)}},{id:"arrowsAlpha",props:["cooldownTime"],func:(...e)=>Pe(...e)?.1:1}],processors:[{type:"sprite",once:!0,payload:{texture:"terminal-border",width:200,height:200,tint:{$calc:"playerColor"}}},{type:"sprite",once:!0,payload:{texture:"terminal",width:200,height:200}},{type:"sprite",once:!0,when:Pe,payload:{texture:"terminal-arrows",width:200,height:200,alpha:.1}},{type:"sprite",once:!0,when:(...e)=>!Pe(...e),payload:{texture:"terminal-arrows",width:200,height:200}},{type:"sprite",when:Pe,payload:{texture:"terminal-highlight",width:200,height:200,tint:16777215,alpha:0,blendMode:1},actions:[{action:"Sequence",params:[[{action:"AlphaTo",params:[1,{$processorParam:"tickDuration",koef:.2}]},{action:"AlphaTo",params:[0,{$processorParam:"tickDuration",koef:.8}]}]]}]},{type:"draw",payload:{drawings:[{method:"beginFill",params:[16777215]},{method:"drawRect",params:[{$calc:"restResourceSize",koef:-.5},{$calc:"restResourceSize",koef:-.5},{$calc:"restResourceSize"},{$calc:"restResourceSize"}]},{method:"endFill"},{method:"beginFill",params:[15998771]},{method:"drawRect",params:[{$calc:"powerResourceSize",koef:-.5},{$calc:"powerResourceSize",koef:-.5},{$calc:"powerResourceSize"},{$calc:"powerResourceSize"}]},{method:"endFill"},{method:"beginFill",params:[16770413]},{method:"drawRect",params:[{$calc:"energyResourceHeight",koef:-.5},{$calc:"energyResourceHeight",koef:-.5},{$calc:"energyResourceHeight"},{$calc:"energyResourceHeight"}]},{method:"endFill"}]}},{type:"sprite",layer:"lighting",once:!0,shouldRun:({calcs:{resourcesTotal:e}})=>e>0,payload:{texture:"glow",width:200,height:200,alpha:1}},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:800,height:800,alpha:.5}}],zIndex:16},De={calculations:[R(),{id:"resourceColor",func:({calcs:{resourcesTotal:e,playerColor:a}})=>e>0?a:0},{id:"decayAlpha",func:({state:{decayTime:e,deathTime:a},stateExtra:{gameTime:t}})=>1-(t-a)/(e-a)}],processors:[{type:"sprite",id:"tombstone-border",once:!0,payload:{texture:"tombstone-border",width:100,height:100,blendMode:1,alpha:{$calc:"decayAlpha"}}},{type:"sprite",props:["resourceColor"],payload:{texture:"tombstone-resource",tint:{$calc:"resourceColor"},alpha:.8,width:100,height:100}},{type:"sprite",layer:"lighting",once:!0,payload:{texture:"tombstone-resource",width:100,height:100}}],actions:[{targetId:"tombstone-border",actions:[{action:"AlphaTo",params:[{$calc:"decayAlpha"},0]}]}],zIndex:5};const He=({state:{user:e}})=>"3"===e||"2"===e,fe=(...e)=>!He(...e);var xe={calculations:[{id:"shotAnim",func:({state:{actionLog:e}})=>e.attack||e.heal||e.repair},{id:"rotation",func:({state:{x:e,y:a},calcs:{shotAnim:t}})=>{const{calculateAngle:o}=T;return t?o(t.x,t.y,e,a):0}},{id:"energyBarHeight",props:["store","storeCapacityResource"],func:({state:{store:e,storeCapacityResource:a}})=>{const t=a&&a.energy?66.7*e.energy/a.energy:0;return Math.min(t,66.7)}},{id:"energyBarBorderRadius",props:["store","storeCapacity"],func:({calcs:{energyBarHeight:e}})=>Math.min(12,e/2)}],processors:[{type:"sprite",once:"true",payload:{texture:"tower-base",tint:{$calc:"playerColor"},width:200,height:200}},{type:"sprite",once:"true",when:fe,payload:{id:"towerRotatable",texture:"tower-rotatable",pivot:{y:32},width:115,height:115},actions:[{action:"RotateTo",params:[{$random:2*Math.PI},0]}]},{type:"sprite",once:"true",when:He,payload:{id:"towerRotatable",texture:"tower-rotatable-npc",pivot:{y:32},width:115,height:115},actions:[{action:"RotateTo",params:[{$random:2*Math.PI},0]}]},{type:"creepActions",props:"*",layer:"effects"},{type:"runAction",payload:{id:"towerRotatable"},when:({calcs:{shotAnim:e}})=>!!e,actions:[{action:"RotateTo",params:[{$calc:"rotation"},.3]}]},{type:"runAction",once:!0,payload:{id:"towerRotatable"},when:({calcs:{shotAnim:e}})=>!e,actions:[{action:"Repeat",params:[{action:"RotateBy",params:[Math.PI,10]}]}]},{type:"draw",when:fe,payload:{parentId:"towerRotatable",drawings:[{method:"beginFill",params:[16770413]},{method:"drawRoundedRect",params:[-45,0,90,{$calc:"energyBarHeight"},{$calc:"energyBarBorderRadius"}]},{method:"endFill"}]}},{type:"sprite",once:!0,layer:"lighting",shouldRun:({state:{store:e}})=>e.energy>0,payload:{texture:"glow",width:100,height:100,alpha:1}},{id:"light",once:!0,type:"sprite",layer:"lighting",payload:{texture:"glow",width:600,height:600,alpha:.5}},{type:"runAction",shouldRun:({state:{actionLog:{repair:e,heal:a,attack:t}={}}})=>e||a||t,payload:{id:"light"},actions:[{action:"Sequence",params:[[{action:"AlphaTo",params:[1,{$processorParam:"tickDuration",koef:.1}]},{action:"AlphaTo",params:[.5,{$processorParam:"tickDuration",koef:.3}]}]]}]},{id:"flare",once:!0,type:"sprite",layer:"effects",payload:{texture:"flare1",width:400,height:400,alpha:0,blendMode:1}},{type:"runAction",when:({calcs:{shotAnim:e}})=>!!e,payload:{id:"flare"},actions:[{action:"Sequence",params:[[{action:"AlphaTo",params:[.2,{$processorParam:"tickDuration",koef:.1}]},{action:"AlphaTo",params:[0,{$processorParam:"tickDuration",koef:.3}]}]]}]}],zIndex:13};const Ge={color:13421772,radius:40,startAngle:-Math.PI/2,strokeWidth:10};var Ye={calculations:[{id:"spawningAngle",func:({state:{spawning:e},stateExtra:{gameTime:a}})=>{const{spawnTime:t=a+.01,needTime:o=0}=e||{},r=t-a;return Ge.startAngle+(o?2*Math.PI*(o-r)/o:0)}},{id:"ttl",func:({state:{decayTime:e},stateExtra:{gameTime:a}})=>100*Math.floor((e-a)/100)}],processors:[{type:"sprite",once:"true",payload:{texture:"invaderCore",width:200,height:200}},{type:"siteProgress",payload:{color:16715065,radius:23,lineWidth:0,progress:{$calc:"ttl"},progressTotal:i.a.STRONGHOLD_DECAY_TICKS}},{type:"draw",props:["spawningAngle"],payload:{id:"arc",drawings:[{method:"lineStyle",params:[Ge.strokeWidth,Ge.color,1]},{method:"arc",params:[0,0,Ge.radius,Ge.startAngle,{$calc:"spawningAngle"}]}]}},{type:"creepActions",props:"*"},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:100,height:100,alpha:1}},{type:"sprite",once:!0,layer:"lighting",payload:{texture:"glow",width:800,height:800,tint:16744576}}],zIndex:17},We={calculations:[R(),{id:"resourceColor",func:({calcs:{resourcesTotal:e,playerColor:a}})=>e>0?a:0},{id:"decayAlpha",func:({state:{decayTime:e,destroyTime:a},stateExtra:{gameTime:t}})=>1-(t-a)/(e-a)}],processors:[{type:"sprite",id:"ruin",once:!0,payload:{texture:"ruin",width:100,height:100,blendMode:1,alpha:{$calc:"decayAlpha"}}},{type:"sprite",props:["resourceColor"],payload:{texture:"tombstone-resource",tint:{$calc:"resourceColor"},alpha:.8,width:100,height:100}},{type:"sprite",layer:"lighting",once:!0,payload:{texture:"tombstone-resource",width:100,height:100}}],actions:[{targetId:"ruin",actions:[{action:"AlphaTo",params:[{$calc:"decayAlpha"},0]}]}],zIndex:5};const{VoidFilter:$e}=PIXI.filters,{TilingSprite:ve}=PIXI.extras,{Graphics:ke,BLEND_MODES:be}=PIXI;a.default={preprocessors:["terrain"],layers:[{id:"terrain",afterCreate:async(e,{app:a,resourceManager:t,world:{options:{VIEW_BOX:o,CELL_SIZE:r,lighting:s="normal"}}})=>{function n(n,i,c,E,l){const{texture:R}=t.getCachedResource(n),p=new ve(R,i?o:r,c?o:r);p.x=-r/2+(E?o-r:0),p.y=-r/2+(l?o-r:0),p.tileScale.x=r/R.width,p.tileScale.y=r/R.height,a.renderer instanceof PIXI.WebGLRenderer?("disabled"===s&&(p.tint=10526880),"low"===s&&(p.tint=12632256)):p.tint=10526880,p.blendMode=be.ADD,p.alpha=.5,p.zIndex=1,e.addChild(p)}n("exit-left",!1,!0,!1,!1),n("exit-bottom",!0,!1,!1,!0),n("exit-top",!0,!1,!1,!1),n("exit-right",!1,!0,!0,!1)}},{id:"wallGraffiti"},{id:"objects",isDefault:!0},{id:"lighting",afterCreate:async(e,{app:a,world:{options:{CELL_SIZE:t,HALF_CELL_SIZE:o=t/2,VIEW_BOX:r,lighting:s="normal"}}})=>{if("disabled"!==s&&a.renderer instanceof PIXI.WebGLRenderer){e.filters=[new $e],e.filters[0].blendMode=PIXI.BLEND_MODES.MULTIPLY;const a=new PIXI.Graphics;a.beginFill(8421504,1),a.drawRect(-o,-o,r,r),a.endFill(),e.addChild(a),"low"===s&&(e.alpha=.5),e.on("display",e=>{e._overrideBlendMode||(e.blendMode=PIXI.BLEND_MODES.SCREEN)})}else e.on("display",e=>{e.visible=!1})}},{id:"effects"}],objects:{_all:c,constructedWall:E,constructionSite:l,container:p,controller:d,creep:h,deposit:u,energy:{processors:[{type:"resourceCircle"},{type:"resourceCircle",layer:"lighting",payload:{tint:16777215}}],zIndex:1},extension:g,extractor:I,factory:P,flag:M,keeperLair:{processors:[{type:"circle",once:!0,payload:{radius:60,color:0}},{type:"circle",once:!0,actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"Spawn",params:[[{action:"ScaleTo",params:[0,0,0]},{action:"FadeIn",params:[0]}]]},{action:"ScaleTo",params:[{$rel:"scale.x"},{$rel:"scale.y"},1]},{action:"FadeOut",params:[1]}]]}]}],payload:{radius:50,color:7864839}},{type:"circle",once:!0,actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"ScaleTo",params:[0,0,0]},{action:"ScaleTo",params:[{$rel:"scale.x",koef:.3},{$rel:"scale.y",koef:.3},1]},{action:"ScaleTo",params:[{$rel:"scale.x"},{$rel:"scale.y"},1]}]]}]}],payload:{radius:50,color:0}},{type:"sprite",layer:"lighting",payload:{texture:"glow",width:800,height:800,alpha:.5,tint:16711680}},{type:"sprite",layer:"lighting",once:!0,payload:{texture:"glow",width:150,height:150}}],zIndex:3},lab:Y,link:W,mineral:v,nuke:B,nuker:Z,observer:V,portal:{processors:[{type:"circle",once:!0,payload:{radius:45,color:1118515,alpha:.5}},{type:"circle",once:!0,actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"Spawn",params:[[{action:"ScaleTo",params:[0,0,0]},{action:"AlphaTo",params:[.5,0]}]]},{action:"ScaleTo",params:[{$rel:"scale.x"},{$rel:"scale.y"},1]},{action:"FadeOut",params:[1]}]]}]}],payload:{radius:40,color:6406381,alpha:.5}},{type:"circle",once:!0,actions:[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"Spawn",params:[[{action:"ScaleTo",params:[0,0,0]},{action:"AlphaTo",params:[.5,0]}]]},{action:"ScaleTo",params:[{$rel:"scale.x",koef:.3},{$rel:"scale.y",koef:.3},1]},{action:"Spawn",params:[[{action:"ScaleTo",params:[{$rel:"scale.x"},{$rel:"scale.y"},1]},{action:"FadeOut",params:[1]}]]}]]}]}],payload:{radius:40,color:1118515,alpha:.5}},{type:"sprite",layer:"lighting",once:!0,payload:{texture:"glow",width:700,height:700,tint:10066431,alpha:.7},actions:[{action:"Spawn",params:[[{action:"Repeat",params:[{action:"Sequence",params:[[{action:"ScaleTo",params:[{$rel:"scale.x",koef:1.2},{$rel:"scale.y",koef:1.2},2]},{action:"ScaleTo",params:[{$rel:"scale.x"},{$rel:"scale.y"},2]}]]}]},{action:"Repeat",params:[{action:"Sequence",params:[[{action:"AlphaTo",params:[.1,3.5]},{action:"AlphaTo",params:[.7,3.5]}]]}]}]]}]},{type:"sprite",layer:"lighting",once:!0,payload:{texture:"glow",width:150,height:150,tint:7829503}}],zIndex:3},powerBank:z,powerCreep:j,powerSpawn:Re,road:{processors:[{type:"road",layer:"objects"}],disappearProcessor:{type:"disappear"},zIndex:-1},source:ye,spawn:we,storage:Le,terminal:Me,tombstone:De,tower:xe,rampart:{calculations:[{id:"rampartColor",once:!0,func:({state:{user:e},stateExtra:{gameData:{player:a}}})=>e===a?4521796:16729156}],processors:[{type:"sprite",layer:"effects",props:["isPublic"],payload:{texture:"rampart",width:100,height:100,alpha:.5,tint:{$calc:"rampartColor"}},shouldRun:({state:{isPublic:e}})=>!!e}],zIndex:0},invaderCore:Ye,ruin:We}}}]).default;
//# sourceMappingURL=renderer-metadata.js.map